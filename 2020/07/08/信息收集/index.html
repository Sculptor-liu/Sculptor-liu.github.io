<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/logo.jpg?v=2.1.1" type="image/png" sizes="16x16"><link rel="icon" href="/images/logo.jpg?v=2.1.1" type="image/png" sizes="32x32"><meta name="description" content="1.1. 第一步：域名探测       当我们对一个站点进行渗透探测之前，一般渗透测试人员直接通过漏洞扫描器对指定目标站点进行渗透，当指定目标站点无漏洞时，渗透测试人员就需要进行信息收集工作来完成后期的渗透。 目前一般域名漏洞扫描工具  ：AWVS，APPSCAN，Netspark，Webinspect，Nmap，Nessus，天镜，明鉴，WVSS，RSAS，等。">
<meta property="og:type" content="article">
<meta property="og:title" content="信息收集">
<meta property="og:url" content="https://sculptor-liu.github.io/2020/07/08/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/index.html">
<meta property="og:site_name" content="Sculptor&#39;s blog">
<meta property="og:description" content="1.1. 第一步：域名探测       当我们对一个站点进行渗透探测之前，一般渗透测试人员直接通过漏洞扫描器对指定目标站点进行渗透，当指定目标站点无漏洞时，渗透测试人员就需要进行信息收集工作来完成后期的渗透。 目前一般域名漏洞扫描工具  ：AWVS，APPSCAN，Netspark，Webinspect，Nmap，Nessus，天镜，明鉴，WVSS，RSAS，等。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-07-08T09:16:11.411Z">
<meta property="article:modified_time" content="2021-03-20T08:24:57.660Z">
<meta property="article:author" content="Sculptor">
<meta property="article:tag" content="信息收集">
<meta name="twitter:card" content="summary"><title>信息收集 | Sculptor's blog</title><link ref="canonical" href="https://sculptor-liu.github.io/2020/07/08/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.1.1"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":true},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: true,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.1.1"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/friends/"><span class="header-nav-menu-item__icon"><i class="fas fa-link"></i></span><span class="header-nav-menu-item__text">友链</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-info-circle"></i></span><span class="header-nav-menu-item__text">关于我</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">搜索</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Sculptor's blog</div><div class="header-banner-info__subtitle">不知名的陌生人</div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">信息收集</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2020-07-08</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-03-20</span></span><span class="post-meta-item post-meta-item--visitors"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">阅读次数</span><span class="post-meta-item__value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body">
        <h2 id="1-1-第一步：域名探测">
          <a href="#1-1-第一步：域名探测" class="heading-link"><i class="fas fa-link"></i></a>1.1. 第一步：域名探测</h2>
      <p>当我们对一个站点进行渗透探测之前，一般渗透测试人员直接通过漏洞扫描器对指定目标站点进行渗透，当指定目标站点无漏洞时，渗透测试人员就需要进行信息收集工作来完成后期的渗透。</p>
<p>目前一般域名漏洞扫描工具  ：AWVS，APPSCAN，Netspark，Webinspect，Nmap，Nessus，天镜，明鉴，WVSS，RSAS，等。</p>
<a id="more"></a>

        <h2 id="1-2-第二步：子域名探测">
          <a href="#1-2-第二步：子域名探测" class="heading-link"><i class="fas fa-link"></i></a>1.2. 第二步：子域名探测</h2>
      <p>工具例如：Layer子域名挖掘机，Sublist3r，subDomainsBrute</p>
<p>根据主域名，可以获得二级域名，三级域名，。。。主要姿势可以有：</p>

        <h3 id="1-2-1-DNS域-传送漏洞">
          <a href="#1-2-1-DNS域-传送漏洞" class="heading-link"><i class="fas fa-link"></i></a>1.2.1. DNS域 传送漏洞</h3>
      <p>如果存在，不仅能搜索到子域名，还能轻松找到一个枚举，这样的好事百试不厌；如果 SRC 一级域名不多，直接在 kali 下 dnsenum + 域名（比如说：dnsenum oldboy.com -f /dns.txt –dnsserver 114.114.114.114 )</p>
<p><strong>工具说明及用法可参考如下:</strong></p>
<p>dnsenum的目的是尽可能收集一个域的信息，它能够通过谷歌或者字典文件猜测可能存在的域名，以及对一个网段进行反向查询。它可以查询网站的主机地址信息。域名服务器、mxrecord (函件交换记录)，在域名服务器上执行axfr请求，通过谷歌脚本得到扩展城名信息google hacking),提取自域名并查询，计算C类地址并执行whois查询，执行反向查询，把地址段写入文件。</p>
<p><strong>参数说明:</strong></p>
<ol>
<li>-h：查看工具使用帮助</li>
<li>–dnsserver <server> ：指定域名服务器</server></li>
<li>–enum ：快捷选项，相当于”-threads -s 15 -w”</li>
<li>–noreverse ：跳过反向查询操作</li>
<li>–nocolor ：无彩色输出</li>
<li>–private ：显示并在”domain_ips.txt”文件结尾保存私有的ips</li>
<li>–subfile <file> ：写入所有有效的子域名到指定文件</file></li>
<li>–t，–timeout <value> ：tcp或者udp的连接超时时间。默认为10s (时间单位:秒)。</value></li>
<li>–threads <vaue> ：查询线程数</vaue></li>
<li>-v，–verbose ：显示所有的进度和错误消息</li>
<li>-o，–output <file> ：输出选项，将输出信息保存到指定文件。</file></li>
<li>-e，–exclude <regexp> ：反向查询选项，从反向查询结果中排除与正则表达式相符的PTR 记录，在排查无效主机上非常有用。</regexp></li>
<li>-w，–whois ：在一个C段网络地址范围提供whois查询</li>
<li>-f dns.txt ：指定字典文件，可以换成dns-big.txt也可以自定义字典</li>
</ol>
<p>相关解析记录说明可参考：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://wenku.baidu.com/view/d2d597b669dc5022aaea0030.html">https://wenku.baidu.com/view/d2d597b669dc5022aaea0030.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-2-2-备案号查询">
          <a href="#1-2-2-备案号查询" class="heading-link"><i class="fas fa-link"></i></a>1.2.2.备案号查询</h3>
      <p>这算是奇招吧，通过查询系统域名备案号，再反查备案号相关的域名，收获颇丰。</p>
<p>ICP 备案查询网：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.beianbeian.com/">http://www.beianbeian.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>天眼查：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.tianyancha.com/">http://www.tianyancha.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-2-3-SSL-证书">
          <a href="#1-2-3-SSL-证书" class="heading-link"><i class="fas fa-link"></i></a>1.2.3. SSL 证书</h3>
      <p>通过查询 SSL 证书（现在很多网站都是 https），获取的域名存活率很高，这应该也是不错的思路。</p>
<p>查询网址：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://myssl.com/ssl.html">https://myssl.com/ssl.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> </p>
<p>或者 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.chinassl.net/ssltools/ssl-checker.html">https://www.chinassl.net/ssltools/ssl-checker.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-2-4-Google-搜索-C-段">
          <a href="#1-2-4-Google-搜索-C-段" class="heading-link"><i class="fas fa-link"></i></a>1.2.4. Google 搜索 C 段</h3>
      <p>这招比较少，国内 Google 没法用，国内的用 bin 或者 百度 都可以，在没有什么进展的情况下或许会有惊喜。（比如说，网站被挂码了）</p>
<p>方法一：参照 Google hacking 的方法</p>
<p>方法二：用 k8 工具，前提条件是要注册 bing（必应） 接口。（k8_C段旁注工具）</p>
<p>什么是C段:比如在：127.127.127.4这个IP上面有一个网站127.4 这个服务器上面有网站，我们可以想想，他是一个非常大的站几乎没什么漏洞，但是在他同C段 127.127.127.1<del>127.127.127.255这1</del>255上面也有服务器而且也有网站并且存在漏洞,那么我们就可以来渗透1~255 任何一个站之后提权来嗅探得到127.4这台服务器的密码甚至3389连接的密码后台登录的密码如果运气好会得到很多的密码。</p>

        <h3 id="1-2-5-APP-提取">
          <a href="#1-2-5-APP-提取" class="heading-link"><i class="fas fa-link"></i></a>1.2.5. APP 提取</h3>
      <p>反编译APP进行提取相关IP地址，此外在APP上挖洞的时候，可以发现前面招式找不到的域名，在APP里面有大量的接口IP和内网IP, 同时可获取不少安全漏洞。（其实 app 的漏洞比 web 多一些）</p>
<p>Andriod Killer，当网站有app，然后把app下载下来，进行反编译分析，就会有一系列IP</p>

        <h3 id="1-2-6-微信公众号">
          <a href="#1-2-6-微信公众号" class="heading-link"><i class="fas fa-link"></i></a>1.2.6. 微信公众号</h3>
      <p>企业的另一通道，渗透相关公众号，绝对会有意外收获，：不少漏洞+域名，有关 Burp 抓取 app</p>

        <h3 id="1-2-7-字典枚举法">
          <a href="#1-2-7-字典枚举法" class="heading-link"><i class="fas fa-link"></i></a>1.2.7. 字典枚举法</h3>
      <p>字典枚举法是一种传统的查找子域名的技术，这类技术涉及的工具有：DNSReconcile，Layer 子域名挖掘机，DirBuster，Demon二级域名爆破</p>

        <h3 id="1-2-8-公开-DNS-源">
          <a href="#1-2-8-公开-DNS-源" class="heading-link"><i class="fas fa-link"></i></a>1.2.8. 公开 DNS 源</h3>
      <p>Rapid 7 下 Sonor 项目发布的：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://scans.io/study/sonar.fdns_v2">https://scans.io/study/sonar.fdns_v2</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>DNS 历史解析： <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://dnsdb.io/zh-cn/">https://dnsdb.io/zh-cn/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-2-9-威胁情报查询">
          <a href="#1-2-9-威胁情报查询" class="heading-link"><i class="fas fa-link"></i></a>1.2.9. 威胁情报查询</h3>
      <p>华为安全情报：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://isecurity.huawei.com/">https://isecurity.huawei.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-2-10-子域名枚举">
          <a href="#1-2-10-子域名枚举" class="heading-link"><i class="fas fa-link"></i></a>1.2.10 子域名枚举</h3>
      <p>子域名爆破网站：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://phpinfo.me/domain">https://phpinfo.me/domain</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>IP反查绑定域名网站：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://dns.aizhan.com/">http://dns.aizhan.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-2-11-证书透明度公开日志枚举">
          <a href="#1-2-11-证书透明度公开日志枚举" class="heading-link"><i class="fas fa-link"></i></a>1.2.11 证书透明度公开日志枚举</h3>
      <p>证书透明度是证书授权机构（CA）的一个项目，证书授权机构会将每个SSL/TLS证书发布到公共日志中，一个SSL/TLS证书通常包含域名，子域名和邮件地址，这些也经常成为攻击者非常希望获得的有用信息。</p>
<p>搜索：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://crt.sh/">https://crt.sh</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>或者：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://censys.io/">https://censys.io</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="1-3-敏感信息收集">
          <a href="#1-3-敏感信息收集" class="heading-link"><i class="fas fa-link"></i></a>1.3. 敏感信息收集</h2>
      
        <h3 id="1-3-1-web源代码泄露">
          <a href="#1-3-1-web源代码泄露" class="heading-link"><i class="fas fa-link"></i></a>1.3.1. web源代码泄露</h3>
      <p>通过相关工具暴力破解相关 Web 源码。</p>
<p>最强调的是 GitHub 信息泄露了，直接取GitHub 上搜索，可能有人不自信认为自己没有能力去 SRC 挖洞。</p>
<p>信息泄露收集可能会用到以下地址：</p>
<ol>
<li>网盘搜索：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.pansou.com/">http://www.pansou.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>网盘密码破解可参考：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.52pojie.cn/thread-763130-1-1.html">https://www.52pojie.cn/thread-763130-1-1.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>社工信息泄露：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.instantcheckmate.com/">https://www.instantcheckmate.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>源码搜索：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://searchcode.com,https//gitee.com%EF%BC%8Chttps://gitcafe.com%EF%BC%8Chttps://code.csdn.net">https://searchcode.com，https://gitee.com，https://gitcafe.com，https://code.csdn.net</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>钟馗之眼：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www/zoomeye.org">https://www/zoomeye.org</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>天眼查：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.tianyancha.com/">https://www.tianyancha.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>其他：威胁情报，微步在线，ti.360.cn，Virustotal</li>
</ol>

        <h3 id="1-3-2-邮箱信息收集">
          <a href="#1-3-2-邮箱信息收集" class="heading-link"><i class="fas fa-link"></i></a>1.3.2. 邮箱信息收集</h3>
      <p>收集邮箱信息主要有两个作用: </p>
<ol>
<li>通过发现目标系统账号的命名规律，可以用来后期登入其他子系统。</li>
<li>爆破登入邮箱用。</li>
</ol>
<p>通常，邮箱的账号有如下几种生成规律:比如某公司有员工名叫做“张小三”，它的邮箱可能如下:<br><span class="exturl"><a class="exturl__link" href="mailto:&#122;&#104;&#97;&#x6e;&#103;&#120;&#105;&#97;&#111;&#115;&#x61;&#110;&#x40;&#120;&#111;&#120;&#x2e;&#x63;&#111;&#109;">&#122;&#104;&#97;&#x6e;&#103;&#120;&#105;&#97;&#111;&#115;&#x61;&#110;&#x40;&#120;&#111;&#120;&#x2e;&#x63;&#111;&#109;</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>     <span class="exturl"><a class="exturl__link" href="mailto:&#x78;&#x69;&#97;&#111;&#x73;&#x61;&#x6e;&#46;&#x7a;&#104;&#97;&#x6e;&#x67;&#x40;&#x6f;&#x78;&#x2e;&#99;&#111;&#109;">&#x78;&#x69;&#97;&#111;&#x73;&#x61;&#x6e;&#46;&#x7a;&#104;&#97;&#x6e;&#x67;&#x40;&#x6f;&#x78;&#x2e;&#99;&#111;&#109;</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>    <span class="exturl"><a class="exturl__link" href="mailto:&#x7a;&#120;&#105;&#x61;&#111;&#x73;&#x61;&#x6e;&#x40;&#120;&#x78;&#x2e;&#x63;&#x6f;&#x6d;">&#x7a;&#120;&#105;&#x61;&#111;&#x73;&#x61;&#x6e;&#x40;&#120;&#x78;&#x2e;&#x63;&#x6f;&#x6d;</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>当我们收集几个邮箱之后，便会大致猜出对方邮箱的命名规律。除了员工的邮箱之外，通过公司会有一些共有的邮箱，比如人力的邮箱、客服的邮箱，<span class="exturl"><a class="exturl__link" href="mailto:&#x68;&#114;&#x40;&#x78;&#x78;&#46;&#x63;&#111;&#x6d;">&#x68;&#114;&#x40;&#x78;&#x78;&#46;&#x63;&#111;&#x6d;</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>/kefu@xx.com 这种邮箱有时会存在弱口令，在渗透时可额外留意下， 我们可以通过手工或者工具的方式来确定搜索邮箱。</p>
<p><strong>手工方式：</strong></p>
<ol>
<li>可以到百度等搜索引擎上搜索邮箱信息</li>
<li>GitHub 等第三方托管平台，例如数据库连接信息，邮箱密码，uc-key，阿里的osskey</li>
<li>社工库</li>
</ol>
<p><strong>工具方式：</strong></p>
<p>在邮箱收集领域不得不提一个工具：The Harvester，The Harvester 可用于搜索Google，Bing 和 PGP 服务器的电子邮件. 主机 . 子域名，因此需要翻墙运用此工具。工具下载地址：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com/laramies/theHarvester">https://github.com/laramies/theHarvester</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><strong>注：</strong></p>
<p>python -m pip install -r requirements.txt  导入相关配置，python3.7版本（其他的可能不行）</p>
<p>使用方法很简单：./theHarvester.py -d 域名 -l 1000 -b all（-l 是搜索页数，-b 是指把所有搜索引擎都使用一遍，看哪个可以）</p>

        <h3 id="1-3-3-历史漏洞收集">
          <a href="#1-3-3-历史漏洞收集" class="heading-link"><i class="fas fa-link"></i></a>1.3.3. 历史漏洞收集</h3>
      <p>仔细分析，大胆验证，发散思维，对企业的运维，开发习惯了解绝对是有很大帮助的。可以把漏洞保存下来进行统计。这些漏洞，企业可能没有修复，或者没有修复完整。</p>
<ol>
<li>wooyun 历史漏洞库：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.wooyun.suimugan.com(现在打不开了)/">https://www.wooyun.suimugan.com（现在打不开了）</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>漏洞银行：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.bugbank.cn/">https://www.bugbank.cn/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>360补天：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.butian.net/">https://www.butian.net/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>教育行业漏洞报告平台(Beta)：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://src.edu-info.edu.cn/login/">https://src.edu-info.edu.cn/login/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>

        <h3 id="1-3-4-Burpsuite-的Repeater功能">
          <a href="#1-3-4-Burpsuite-的Repeater功能" class="heading-link"><i class="fas fa-link"></i></a>1.3.4 Burpsuite 的Repeater功能</h3>
      <p>可以获取一些服务器的信息，例如运行的Server类型与版本，PHP的版本信息。</p>

        <h2 id="1-4-指纹识别">
          <a href="#1-4-指纹识别" class="heading-link"><i class="fas fa-link"></i></a>1.4. 指纹识别</h2>
      <p>这里的指纹讲的是网站CMS指纹识别，计算机操作系统及Web容器的指纹识别。</p>
<p>渗透测试过程中指纹识别是很有必要的，只有识别出相应的Web容器或者CMS，才能进行相应的渗透操作。</p>
<p>CMS又称整站系统或者文章系统，开发者只要给客户一个软件包，客户自己安装配置好，就可以定期更新数据来维护网站，节省了大量的人力和物力。</p>
<p>常见的CMS有：Dedecms(织梦)，Discuz，PHPWEB，PHPWind，PHPCMS，ECShop，Dvbbs，SiteWeaver，ASPCMS，帝国，Z-Blog，WordPress。</p>
<p>在这个过程可以加入端口扫描，敏感文件扫描之类的操作，用到的工具，如：御剑，whatweb，Wapplyzer，WebRobo，椰树，轻量WEB指纹识别等工具。</p>
<p>推荐一篇文章：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://anquanke.com/post/id/178230/">https://anquanke.com/post/id/178230/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>在线查询CMS指纹识别：</p>
<p>BugScaner：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://whatweb.bugscaner.com/look">http://whatweb.bugscaner.com/look</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>云悉指纹：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://ww.yunsee.cn/finger.html">http://ww.yunsee.cn/finger.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>WhatWeb：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://whatweb.net/">https://whatweb.net</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="1-5-查找真实IP">
          <a href="#1-5-查找真实IP" class="heading-link"><i class="fas fa-link"></i></a>1.5 查找真实IP</h2>
      <p>渗透测试过程中，目标服务器可能只有一个域名，那么如何通过这个域名来确定目标服务器的真实IP对渗透测试来说很重要，如果目标服务器不存在CDN，可以直接通过 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.ip138.com来获取目标的一些ip以及域名信息./">www.ip138.com来获取目标的一些IP以及域名信息。</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>CDN即内容分发网络，主要解决因传输距离和不同运营节点造成的网络速度性能低下的问题。就是一组在不同运营商之间的对接节点上的高速缓存服务器，把用户经常访问的静态数据资源（例如：静态的html，css，js图片等文件）直接缓存到节点服务器上，当用户再次请求时，会直接分发到在离用户的节点的服务上响应给用户，当用户有实际数据交互时才会从远程Web服务器上响应，这样可以大大提高网站的响应速度和用户体验。</p>
<p>如果我们要渗透的目标购买了CDN服务，可以直接ping目标的域名，但得到的并非真正目标Web服务器，而只是离我们最近的一台目标节点的CDN服务器。</p>

        <h3 id="1-5-1-判断是否用了CDN">
          <a href="#1-5-1-判断是否用了CDN" class="heading-link"><i class="fas fa-link"></i></a>1.5.1 判断是否用了CDN</h3>
      <p>ping目标域名，观察域名解析情况。</p>
<p>利用在线网站：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.17ce.com/">https://www.17ce.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>进行全国多地区的ping服务器操作，然后对比每个地区ping出的IP结果，查看这些IP是否一致，如果一致就很有可能不存在CDN；如果IP大多不一致或者规律性很强，可以尝试查询这些IP的归属地。</p>

        <h3 id="1-5-2-绕过CDN寻找真实IP">
          <a href="#1-5-2-绕过CDN寻找真实IP" class="heading-link"><i class="fas fa-link"></i></a>1.5.2 绕过CDN寻找真实IP</h3>
      <ol>
<li>内部资源箱，一般的邮件系统都在内部，没有经过CDN解析，通过网站用户注册或者RSS订阅功能，查看邮件，寻找邮件头部中的邮件服务器域名IP，ping这个邮件服务器域名就可以得到真实的IP。</li>
<li>扫描网站测试文件，如：phpinfo，test等。</li>
<li>分站域名，很多网站主站的访问量很大，所以主站一般都会挂CDN，但是分站可能不会挂，可以通过ping一个二级域名获取分站IP，可能会有分站和主站不是通过一个IP但是在同一个C段下，从而判断真实IP。</li>
<li>国外访问，国内的CDN 往往只对国内的用户的访问加速，而国外的CDN就不一定了，通过国外的在线代理网站 App Synthetic Monitor：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://asm.ca.com/en/ping.php%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%BE%97%E5%88%B0%E7%9C%9F%E5%AE%9EIP%E3%80%82">https://asm.ca.com/en/ping.php，可能会得到真实IP。</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>查询域名的解析记录，也许目标很久以前并没有使用CDN，所以可以通过网站NETCRAFT：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.netcraft.com/">https://www.netcraft.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> 来观察域名的IP历史记录，</li>
<li>如果目标网站有自己的App，可以尝试利用 Fiddler或者Burpsuite 抓取App的请求，从而找到真实IP</li>
<li>绕过 CloudFlare CDN 查找真实IP，现在很多网站都使用CloudFlare 提供的CDN服务，在确定了目标网站使用了CDN后，可以尝试通过在线网站CloudFlareWatch：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.crimeflare.us/cfs.html#box%EF%BC%88%E4%BC%BC%E4%B9%8E%E4%B8%8D%E8%A1%8C%E4%BA%86%EF%BC%89">http://www.crimeflare.us/cfs.html#box（似乎不行了）</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>

        <h3 id="1-5-3-验证获取的IP">
          <a href="#1-5-3-验证获取的IP" class="heading-link"><i class="fas fa-link"></i></a>1.5.3 验证获取的IP</h3>
      <p>直接尝试IP访问，看看响应的页面是不是和访问的域名返回的一样；在目标段很大的时候可以借助类似Masscan的工具批扫描对应IP段中所有开了80，43，8080 端口的IP，然后逐个IP访问。</p>

        <h2 id="1-6-收集敏感目录文件">
          <a href="#1-6-收集敏感目录文件" class="heading-link"><i class="fas fa-link"></i></a>1.6 收集敏感目录文件</h2>
      <p>针对网站目录扫描的工具主要有：DirBuster,御剑，wwwscan，Spinder.py(轻量级快速单文件目录后台扫描)，Sensitivefilescan(轻量级快速单文件目录后台扫描)，Weakfilescan(轻量级快速单文件目录后台扫描)。</p>

        <h3 id="1-6-1DirBuster">
          <a href="#1-6-1DirBuster" class="heading-link"><i class="fas fa-link"></i></a>1.6.1DirBuster</h3>
      <p>Target URL输入框输入要扫描的网址，扫描时将请求方法设置为“Auto Switch(HEAD and GET)”选项。</p>
<p>设置线程数值：20-30之间，过大时容易引起系统死机。</p>
<p>选择扫描类型，如果使用个人字典，则选择“List based brute force“选项</p>
<p>单击”Browse“选择字典</p>
<p>在 Select starting options 中选择”URL Fuzz“方式进行扫描，设置fuzzing时需要注意，在URL to fuzz里输入”/{dir}“，这里的dir是一个变量，用来代表字典中的每一行。</p>
<p>如果要扫描的目标是：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.xxx.com/admin/%EF%BC%8C%E5%B0%B1%E8%A6%81%E5%9C%A8URL">http://www.xxx.com/admin/，就要在URL</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> to fuzz里填写”/admin/{dir}“，意思是在”{dir}“的前后可以随意拼接你想要的目录或者后缀，例如输入：”:/admin/{dir}.php“就表示扫描admin目录下的所有PHP文件。</p>
<p>在线工具：WebScan：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.webscan.cc/">http://www.webscan.cc/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="1-7-资产梳理">
          <a href="#1-7-资产梳理" class="heading-link"><i class="fas fa-link"></i></a>1.7. 资产梳理</h2>
      <p>有了庞大的域名，接下来就是帮助SRC梳理资产了。城名可以先判断存活，活着的维续进行确定IP环节。根据IP的分布，确定企业的公网网段。这其实是一项不小的工程， 精准度比较难以拿捏。不过通过不断实战，肯定可以琢磨出一些东西，所以有人称白帽子可能会比企业的运维更了解资产信息。资产梳理过程中可能需要对相关资产漏洞进行查询、利用、发布等，可能会用到已下相关链接地址:</p>

        <h3 id="1-7-1-SRC众测平台">
          <a href="#1-7-1-SRC众测平台" class="heading-link"><i class="fas fa-link"></i></a>1.7.1.SRC众测平台</h3>
      <ol>
<li>国际漏洞提交平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www/hackerone.com/">https://www/hackerone.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>BugX 区块链漏洞平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.bugx.org/">http://www.bugx.org/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>Gsrc 瓜子 src ：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://security.guazi.com/">https://security.guazi.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>区块链安全相应中心：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://dvpnet.io/">https://dvpnet.io/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>CNVD 国家信息安全漏洞平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.cnvd.org.cn/">http://www.cnvd.org.cn/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>漏洞银行：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.bugbank.cn/">https://www.bugbank.cn/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>360 补天：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.butain.net/">https://www.butain.net/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> </li>
<li>教育行业漏洞报告平台(Beta)：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://src.edu-info.edu.cn/login/">https://src.edu-info.edu.cn/login/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>

        <h3 id="1-7-2-国内平台">
          <a href="#1-7-2-国内平台" class="heading-link"><i class="fas fa-link"></i></a>1.7.2.国内平台</h3>
      <ol>
<li>知道创宇 Seebug 漏洞平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.seebug.org/">https://www.seebug.org/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>工控系统行业漏洞平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://ivd.winicssec.com/">http://ivd.winicssec.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>打造中文最大 exploit 库：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.expku.com/">http://www.expku.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>为数不多的漏洞管理插件收集平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.bugscan.net/source/template/vulns/">http://www.bugscan.net/source/template/vulns/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>一家管理漏洞收集平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.0daybank.org/">http://www.0daybank.org/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>

        <h3 id="1-7-3-国外平台">
          <a href="#1-7-3-国外平台" class="heading-link"><i class="fas fa-link"></i></a>1.7.3.国外平台</h3>
      <ol>
<li>国际漏洞提交平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.hackerone.com/">https://www.hackerone.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>xss poc ：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://xssor.io/">http://xssor.io/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>0day 漏洞库：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.0day.today/">https://www.0day.today/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>路由器漏洞库：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://routerpwn.com/">http://routerpwn.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>cve 漏洞平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://cve.mitre.org/">http://cve.mitre.org/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>

        <h3 id="1-7-4-威胁情报">
          <a href="#1-7-4-威胁情报" class="heading-link"><i class="fas fa-link"></i></a>1.7.4.威胁情报</h3>
      <ol>
<li>安全数据交流平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.secsilo.com/">https://www.secsilo.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>华为安全情报：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://isecurity.huawei.com/sec/web//intelligencePortal.do">https://isecurity.huawei.com/sec/web//intelligencePortal.do</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>威胁情报共享平台：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.threatcrowd.org/">https://www.threatcrowd.org/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>被黑站点统计：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.hacked.com.cn/">http://www.hacked.com.cn/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>

        <h3 id="1-7-5-社工库">
          <a href="#1-7-5-社工库" class="heading-link"><i class="fas fa-link"></i></a>1.7.5.社工库</h3>
      <ol>
<li>微信伪造：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.jietuyun.com/">http://www.jietuyun.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>任意邮箱发送：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://tool.chacuo.net/mailanonymous">http://tool.chacuo.net/mailanonymous</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> 和 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://emkei.cz/">https://emkei.cz/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>临时邮箱：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.yopmail.com/">http://www.yopmail.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>邮箱池群：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://veryvp.com/">http://veryvp.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
<li>社工库：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.uneihan.com/">http://www.uneihan.com/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></li>
</ol>

        <h2 id="1-8-Google-Hack">
          <a href="#1-8-Google-Hack" class="heading-link"><i class="fas fa-link"></i></a>1.8. Google Hack</h2>
      
        <h3 id="1-8-1-实战">
          <a href="#1-8-1-实战" class="heading-link"><i class="fas fa-link"></i></a>1.8.1.实战</h3>
      <p>Google搜索引擎之所以强大，关键在于它详细的搜素关键词，以下是几个常用的搜素关键词: (更多详细教里，参见：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://user.qzone.qq.com/568311803/main)%E3%80%82">http://user.qzone.qq.com/568311803/main)。</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<ol>
<li>inurl:用于搜索网页上包含的URL，这个语法对寻找网页上的搜索，帮助之类的很有用。</li>
<li>intext:只搜索网页部分中包含的文字(例如：管理后台，也就是忽略了标题， URL等的文字) </li>
<li>site:可以限制你搜索范围的域名</li>
<li>filetype:搜索文件的后级或者扩展名</li>
<li>intitle:限制你搜索的网页标题</li>
<li>allintitle:搜索所有关键字构成标题的网页，但是推荐不要使用。</li>
<li>link:可以得到一个所有包含了某个指定URL的页面列表，例如： link :www. google. com就可以得到所有连接到Google的页面。</li>
</ol>

        <h2 id="1-9-Nmap-端扫">
          <a href="#1-9-Nmap-端扫" class="heading-link"><i class="fas fa-link"></i></a>1.9 Nmap 端扫</h2>
      <p>功能介绍：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_811d9fdd0101ey07.html">http://blog.sina.com.cn/s/blog_811d9fdd0101ey07.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> </p>
<p>10种扫描解释：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.cnblogs.com/c4isr/archive/2012/12/07/2807491.html">http://www.cnblogs.com/c4isr/archive/2012/12/07/2807491.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>  </p>

        <h3 id="1-9-1-功能介绍">
          <a href="#1-9-1-功能介绍" class="heading-link"><i class="fas fa-link"></i></a>1.9.1 功能介绍</h3>
      <p>Nmap 是一个网路连接端口扫描软件，用来扫描网上电脑开放的网络连接端口，确定哪些服务器运行在哪些连接端口，并且推断计算机运行哪个操作系统。它是网络管理员必用的软件之一，以及用以评估网络系统安全。</p>
<p><strong>功能架构图：</strong></p>
<p>主机发现 —&gt; 端口扫描 —&gt; 版本侦测 —&gt; OS 侦测</p>

        <h3 id="1-9-2-主机发现">
          <a href="#1-9-2-主机发现" class="heading-link"><i class="fas fa-link"></i></a>1.9.2.主机发现</h3>
      <p><strong>1）主机发现原理：</strong></p>
<p>主机发现的原理和ping 命令类似，发送探测包给目标主机，如果收到回复，说明目标主机是开启的。Nmap 支持十多种不同的主机探测方式，比如：发送 ICMPECHO / TIMESTAMP / NETMASK 报文，发送 SCTP INIT / COOKIE-ECHO 包，用户可以在不同的条件下灵活选用不同的方式来探测目标主机。</p>
<p><strong>2）主机发现的基本用法：</strong></p>
<ol>
<li>-sL：List Scan 列表扫描，仅将指定的目标的 IP 列举出来，不进行主机发现。</li>
<li>-sn：Ping Scan 只进行主机发现，不进行端口扫描</li>
<li>-Pn：将所有指定的主机视作开启的，跳过主机发现的过程。</li>
<li>-PS/PA/PU/PY[portlist]：使用 TCPSYN / ACK 或 SCTP INIT / ECHO 方式进行发现。</li>
<li>-PE/PP/PM：使用 ICMP echo ，timestamp，and netmask 请求包发现主机。</li>
<li>-PO[protocollist]：使用 IP 协议包探测对方主机是否开启。</li>
<li>-n/-R：-n表示不进行 DNS 解析，-R表示总是进行 DNS 解析。</li>
<li>–dns-servers &lt;serv1[,serv2],…&gt;：指定 DNS 服务器。</li>
<li>–system-dns：指定使用系统的 DNS 服务器。</li>
<li>–traceroute：追踪每个路由结点。</li>
</ol>
<p><strong>3）使用演示：</strong></p>
<p>扫描局域网 192.168.0.1-192.168.0.250 范围内哪些 IP 的主机是活动的。</p>
<p>命令如下：nmap -sn 192.168.0.1-250</p>

        <h3 id="1-9-3-端口扫描">
          <a href="#1-9-3-端口扫描" class="heading-link"><i class="fas fa-link"></i></a>1.9.3. 端口扫描</h3>
      <p>端口扫描时 Nmap 最基本核心的功能，用于确定目标主机的 TCP / UDP 端口开放情况。默认情况下，Nmap 会扫描1000 个最有可能开放的 TCP 端口。Nmap 通过探测将端口划分为6个状态。</p>
<ol>
<li>open：端口是开放的。</li>
<li>closed：端口是关闭的。</li>
<li>filtered：端口被防火墙 IDS / IPS 屏蔽，无法确定其状态。</li>
<li>unfiltered：端口没有被屏蔽，但是否开放还需进一步确定。</li>
<li>open|filtered：端口是开放的或者是屏蔽的。</li>
<li>closed|filtered：端口是关闭的或者是屏蔽的。</li>
</ol>
<p><strong>1）端口扫描方面非常强大的，提供了很多的探测方式。</strong></p>
<ol>
<li>TCP SYN scanning</li>
<li>TCP connect scannin</li>
<li>TCP ACK scanning</li>
<li>TCP FIN/Xmas/NULL scanning</li>
<li>UDP scanning</li>
<li>其他方式</li>
</ol>
<p><strong>2）端口扫描用法：</strong></p>
<ol>
<li>-sS/sT/sA/sW/sM：指定使用 TCP SYN/Connect()/ACK/Window/Maimon scans 的方式来对目标主机进行扫描。</li>
<li>-sU：指定使用 UDP 扫描方式确定目标主机的 UDP 端口状态。</li>
<li>-sN/sF/sX：指定使用 TCP Null，FIN，and Xmas scans 秘密扫描方式来协助探测对方的 TCP 端口状态。</li>
<li>–scanflags <flags>：定制 TCP 包的 flags。</flags></li>
<li>-sI &lt;zombiehost[:probeport]：指定使用 idle scan 方式来扫描目标主机（前提需要找到合适的 zombie host）。</li>
<li>-sY/sZ：使用 SCTP INIT/COOKIE-ECHO 来扫描 SCTP 协议端口的开放情况。</li>
<li>-sO：使用 IP protocol 扫描确定目标主机支持的协议类型。</li>
<li>-b <FTP relay host>：使用 FTP bounce scan 扫描方式。</FTP></li>
</ol>
<p><strong>3）使用演示：</strong></p>
<p>在此，我们以主机 192.168.0.100 为例。</p>
<p>命令如下：nmap -sS -sU -T4 -top-ports 300 192.168.0.100</p>

        <h3 id="1-9-4-版本侦测">
          <a href="#1-9-4-版本侦测" class="heading-link"><i class="fas fa-link"></i></a>1.9.4. 版本侦测</h3>
      <p><strong>1）版本侦测原理：</strong></p>
<p>简要地介绍版本的侦测原理。版本 侦测主要分为以下几个步骤：</p>
<ol>
<li>首先检查 open 与 open|filtered 状态的端口是否在排除端口列表内，如果在排除列表，将该端口剔除。</li>
<li>如果是 TCP 端口，尝试建立 TCP 连接。尝试等待片刻（通常6秒或者更久，具体时间可以查询文件 nmap-services-probes 中 Probe TCP NULL q|| 对应的 totalwaitms）。通常在等待时间内，会接收到目标主机发送的 “WelcomeBanner” 信息。nmap 将接收到的 Banner 与 nmap-services-probes 中 NULL probe 中的签名进行对比。查找对应应用程序的名字与版本信息。</li>
<li>如果通过 “Welcome Banner” 无法确定应用程序版本，那么 nmap 再尝试发送其他的探测包（即从nmap-services-probes 中挑选合适的 probe），将 probe 得到回复包与数据库中的签名进行对比。如果反复探测都无法得出具体应用，那么打印应用返回报文，让用户自行进一步判定。</li>
<li>如果是 UDP 端口，那么直接使用 nmap-services-probes 中探测包进行探测匹配。根据结果对比分析出 UDP 应用服务类型。</li>
<li>如果探测到应用程序是 SSL ，那么调用 openSSL 进一步的侦查运行在 SSL 之上的具体的应用类型。</li>
<li>如果探测到应用程序是 SunPRC，那么调用 brute-force RPC grinder 进一步探测具体的服务。</li>
</ol>
<p><strong>2）版本侦测用法：</strong></p>
<ol>
<li>–version-light：指定使用轻量侦测方式。</li>
<li>–version-all：尝试使用所有的 probe 进行侦测。</li>
<li>–version-trace：显示出详细的版本侦测过程信息。</li>
</ol>
<p><strong>3）使用演示：</strong></p>
<p>对主机 192.168.0.100 进行版本侦测</p>
<p>命令如下：nmap -sV 192.168.0.100</p>

        <h3 id="1-9-5-OS-侦测">
          <a href="#1-9-5-OS-侦测" class="heading-link"><i class="fas fa-link"></i></a>1.9.5. OS 侦测</h3>
      <p><strong>1）OS 侦测原理：</strong></p>
<p>Nmap 使用 TCP/IP 协议栈指纹来识别不同的操作系统和设备。在RFC 规范中，有些地方对 TCP/IP 的实现并没有强制规定，由此不同的 TCP/IP 方案中有可能都有自己的特定方式。Nmap 主要是根据这些细节上的差异来判断操作系统的类型的。</p>
<p>具体实现方式如下：</p>
<p>Nmap 内部包含了2600多已知系统的指纹特征（在文件 nmap-os-db 文件中）。将此指纹数据库作为进行指纹对比的样本库。分别挑选一个 open 和 closed 的端口，向其发送经过精心设计的 TCP/UDP/ICMP 数据包，根据返回的数据包生成一份系统指纹。将探测生成的 指纹与 nmap-os-db 中指纹进行对比，查找匹配的系统。如果无法匹配，以概率形式列举出可能的系统。</p>
<p><strong>2）OS 侦测用法：</strong></p>
<ol>
<li>-O：指定 Nmap 进行 OS 侦测。</li>
<li>–osscan-limit：限制 Nmap 只对确定的主机进行 OS 探测（至少需确知该主机分别有一个 open 和 closed 的端口）。</li>
<li>–osscan-guess：大胆猜测对方的主机的系统类型。由此准确性会下降不少，但是会尽可能多为用户提供潜在的操作系统。</li>
</ol>
<p><strong>3）使用演示：</strong></p>
<p>命令：nmap -O 192.168.0.100</p>

        <h2 id="1-10-扩展-BurpAPP-抓包">
          <a href="#1-10-扩展-BurpAPP-抓包" class="heading-link"><i class="fas fa-link"></i></a>1.10 扩展 BurpAPP 抓包</h2>
      <p><strong>一. 手机端配置：</strong></p>
<ol>
<li><p>让安卓手机和电脑连入同一个WIFI ，即是在同一个无线局域网下。</p>
</li>
<li><p>查看电脑的IP，本地输入：ipconfig</p>
</li>
<li><p>设置手机代理 IP，将手机的代理IP 设置的和电脑 wifi 的IP一致，</p>
<p>代理设置为 手动，设置主机名为电脑无线局域网IP，端口可以随便设置（如：8080），其他的设置默认。</p>
</li>
</ol>
<p><strong>二. 电脑端配置：</strong></p>
<ol>
<li>打开 Burpsuite ,设置代理代理服务器，设置的IP 和端口要和 手机上设置的一致</li>
</ol>

        <h2 id="1-11-扩展-常见信息泄露利用方法">
          <a href="#1-11-扩展-常见信息泄露利用方法" class="heading-link"><i class="fas fa-link"></i></a>1.11. 扩展:常见信息泄露利用方法</h2>
      
        <h3 id="1-11-1-Git-导致文件泄露">
          <a href="#1-11-1-Git-导致文件泄露" class="heading-link"><i class="fas fa-link"></i></a>1.11.1. Git 导致文件泄露</h3>
      <p>由于目前的web项目的开发采用前后端完全分离的架构:前端全部使用静态文件，和后端代码完全分离，隶属两个不同的项目。表态文件使用git 来进行同步发布到服务器，然后使用nginx指向到指定目录，以达到被公网访问的目的。</p>
<p>在运行git init初始化代码库的时候，会在当前目录下面产生一个.git的隐藏文件，用来记录代码的变更记录等等。在发布代码的时候，把.git这个目录没有删除，直接发布了。使用这个文件，可以用来恢复源代码。</p>
<p>例如：192.168.133.130/zvuldrill-git/.git/config</p>

        <h3 id="1-11-2-DS-store-导致文件泄露">
          <a href="#1-11-2-DS-store-导致文件泄露" class="heading-link"><i class="fas fa-link"></i></a>1.11.2. DS_store 导致文件泄露</h3>
      <p>Ds_store 是 Mac 下 Finder 用来保存如何展示文件/文件夹的数据文件，每个文件下对应一个。由于开发/设计成员在发布代码时未删除文件夹中隐藏的 Ds_store ，可能造成文件目录结构泄露，源代码文件等敏感信息的泄露。</p>
<p>我们可以模仿一个环境，利用 phphstudy 搭建 PHP 环境，把 Ds_store 文件传到相关的目录，然后利用工具进行相关检测。</p>
<p>工具：ds_store_exp，下载地址：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://github.com/lijiejie/ds_store_exp">https://github.com/lijiejie/ds_store_exp</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>为了让实验显得更加真实，我们在本地搭建环境，然后建立一个 admin 和 hello 文件夹，利用该工具运行完成后，查看工具文件夹有什么结果。</p>
<p>这是一个.DS_Store文件泄漏利用脚本，它解析.DS_Store文件并递归下载文件到本地。</p>

        <h3 id="1-11-3-SVN-导致文件泄露">
          <a href="#1-11-3-SVN-导致文件泄露" class="heading-link"><i class="fas fa-link"></i></a>1.11.3. SVN 导致文件泄露</h3>
      <p>Subversion.简称svn ,是一个开放源代码的版本控制系统，相对于的 RCS, CVS，采用了分支管理系统，它的设计目标就是取代cvs，互联网上越来越多的控制服务从cvs 转移到Subversion。</p>
<p>Subversion使用服务端–客户端的结构 ，当然服务端与客户端可以都运行在同一台服务器上。在服务端是存放着所有受控制数据的Subversion仓库，另一端是Subversion的客户端程序，管理着受控数据的一部分在本地的映射时(称为“工作副本”)。在这两端之间是通过各种仓库存取层(Repository Acess，简称RA)的多条通道进行访问的。这些通道中，可以通过不同的网络协议，例如HTTP，SSH等，或本地文件的方式来对仓库进行操作。</p>
<p>SVN 漏洞在实际渗透测试过程中，利用到也比较多，由于一些开发管理员疏忽造成，原理类似DS_Store漏洞。我们这里不再进行搭建环境，给大家推荐工具.利用方法如下:</p>
<ol>
<li>漏洞利用工具: Seay-SVN 漏洞利用工具。</li>
<li>添加网站 url</li>
<li>在被利用的网址后面加 /.svn/entries，列出网站目录，甚至载整站。</li>
</ol>

        <h3 id="1-11-4-WEB-INF-web-xml-泄露">
          <a href="#1-11-4-WEB-INF-web-xml-泄露" class="heading-link"><i class="fas fa-link"></i></a>1.11.4. WEB-INF/web.xml 泄露</h3>
      <p>WEB-INF 是Java的WEB应用的安全目录，如果想在页面中直接访问其中的文件，必须通过web.xml文件对要访问的文件进行相应映射才能访问。</p>
<p>WEB-INF主现包含一下文件或目录。</p>
<p>/WEB-INF/web.xml: Web 应用程序配置文件，描述了servlet 和其他的应用组件配置及命名规则。</p>
<p>/WEB-INF/classes/:包含了站点所有用的class 文件，包括servlet class 和非servlet class，他们不能包含在 jar 文件中。</p>
<p>/WEB-INF/lib/: 存放web应用需要的各种JAR文件。放置仅在这个应用中要求使用的jar文件，如数据库驱动 jar 文件。</p>
<p>/WEB-INF/src/: 源码目录，按照包名结构放置各个java文件。</p>
<p>/WEB-INF/database.properties: 数据库配置文件。</p>
<p><strong>原因:</strong></p>
<p>通常一些web应用我们会使用多个web服务器搭配使用,解决其中的一个web服务器的性能缺陷以及做均衡负载的优点和完成一些分层结构的安全策略等， 在使用这种架构的时候，由于对静态资源目录或映射文件配置不当，可能会引发一些安全问题，导致 web.xml 等文件能够被读取。</p>

        <h2 id="1-12-扩展-ZoomEye-hack">
          <a href="#1-12-扩展-ZoomEye-hack" class="heading-link"><i class="fas fa-link"></i></a>1.12 扩展: ZoomEye hack</h2>
      <p>ZoomEye支持公网设备指纹检素和Web指纹检索的网站，指纹检索包括应用名称，版本，前端框架，后端框架，服务端语言、服务器操作系统，网站容器，内容管理系统和数据库等.</p>
<p>设备指纹包括：应用名、版本开放端口，操作系统，服务名，地理位置等。</p>
<p><strong>实战搜索</strong><br>我们今天主要讲下如何使用他的语法规则去高级搜索，搜索有用信息。</p>
<p>主机设备搜索组件名称。</p>
<ol>
<li>app：组件名</li>
<li>ver：组件版本</li>
</ol>
<p>例1：搜索使用iis6.0主机：app:”Microsoft-IIS” ver”6.0”,可以看到0.6秒搜索到41,781,210左右的使用iis6.0的主机。</p>
<p>例2：搜索使weblogic主机： app: “weblogic httpd” port: 7001 ,可以看到0.078秒搜索到42万左右的使用weblogic的主机。(反序列化漏洞)</p>
<p>例3：查询开放3389端口的主机： port : 3389</p>
<p>例4：查询操作系统为Linux系统的服务器， os:linux</p>
<p>例5：查询公网摄像头： service:”routersetup”</p>
<p>例6：搜索美国的Apache 服务器：app: Apache country:US ，后面还可以接 city</p>
<p>例7：搜索指定IP信息：ip:121.42.173.26</p>
<p>例8：查询 taobao.com 有关域名信息：site:taobao.com</p>
<p>例9：搜索标题中包含该字符的网站：title:weblogic</p>
<p>例10：keywords:Nginx</p>

        <h2 id="1-13-扩展：fofa-hack">
          <a href="#1-13-扩展：fofa-hack" class="heading-link"><i class="fas fa-link"></i></a>1.13. 扩展：fofa hack</h2>
      <p>domin=”” || ip=”” || host=”” || title=”” || header=”” ;</p>
<p>protocol=”https”，搜索指定协议类型</p>
<p>app=”phpinfo”，搜索某些组件相关系统</p>
<p>host=”baidu.com”，搜索包含有特定字符的 URL</p>
<p>title=”powered by” &amp;&amp; os=windows 搜索网页标题中包含有特定字符并且系统是 windows 的网页</p>
<p>详细看官方详细文档：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://fofa.so/help_articles/">https://fofa.so/help_articles/</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>​    </p>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="https://sculptor-liu.github.io">Sculptor</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="https://sculptor-liu.github.io/2020/07/08/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">https://sculptor-liu.github.io/2020/07/08/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-cn" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://sculptor-liu.github.io/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">信息收集</a></span></div><div class="post-share"><div class="social-share" data-sites="qzone, qq, weibo, wechat, douban, linkedin, facebook, twitter, google">Share to: </div></div><div class="post-reward reward"><div class="reward-button">请我喝杯咖啡~</div><div class="reward-qrcode"><span class="reward-qrcode-alipay"><img class="reward-qrcode-alipay__img" src="/images/ali_pay.png"><div class="reward-qrcode-alipay__text">支付宝打赏</div></span><span class="reward-qrcode-wechat"><img class="reward-qrcode-wechat__img" src="/images/wechat_pay.png"><div class="reward-qrcode-wechat__text">微信打赏</div></span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2020/07/19/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E6%8A%80%E6%9C%AF/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">漏洞扫描技术</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2020/07/04/MSF/"><span class="paginator-prev__text">MSF框架</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div><div class="comments" id="comments"><div id="gitalk-container"></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%9F%9F%E5%90%8D%E6%8E%A2%E6%B5%8B"><span class="toc-number">1.</span> <span class="toc-text">
          1.1. 第一步：域名探测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%AD%90%E5%9F%9F%E5%90%8D%E6%8E%A2%E6%B5%8B"><span class="toc-number">2.</span> <span class="toc-text">
          1.2. 第二步：子域名探测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-DNS%E5%9F%9F-%E4%BC%A0%E9%80%81%E6%BC%8F%E6%B4%9E"><span class="toc-number">2.1.</span> <span class="toc-text">
          1.2.1. DNS域 传送漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E5%A4%87%E6%A1%88%E5%8F%B7%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.2.</span> <span class="toc-text">
          1.2.2.备案号查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-SSL-%E8%AF%81%E4%B9%A6"><span class="toc-number">2.3.</span> <span class="toc-text">
          1.2.3. SSL 证书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-Google-%E6%90%9C%E7%B4%A2-C-%E6%AE%B5"><span class="toc-number">2.4.</span> <span class="toc-text">
          1.2.4. Google 搜索 C 段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-5-APP-%E6%8F%90%E5%8F%96"><span class="toc-number">2.5.</span> <span class="toc-text">
          1.2.5. APP 提取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-6-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7"><span class="toc-number">2.6.</span> <span class="toc-text">
          1.2.6. 微信公众号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-7-%E5%AD%97%E5%85%B8%E6%9E%9A%E4%B8%BE%E6%B3%95"><span class="toc-number">2.7.</span> <span class="toc-text">
          1.2.7. 字典枚举法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-8-%E5%85%AC%E5%BC%80-DNS-%E6%BA%90"><span class="toc-number">2.8.</span> <span class="toc-text">
          1.2.8. 公开 DNS 源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-9-%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.9.</span> <span class="toc-text">
          1.2.9. 威胁情报查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-10-%E5%AD%90%E5%9F%9F%E5%90%8D%E6%9E%9A%E4%B8%BE"><span class="toc-number">2.10.</span> <span class="toc-text">
          1.2.10 子域名枚举</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-11-%E8%AF%81%E4%B9%A6%E9%80%8F%E6%98%8E%E5%BA%A6%E5%85%AC%E5%BC%80%E6%97%A5%E5%BF%97%E6%9E%9A%E4%B8%BE"><span class="toc-number">2.11.</span> <span class="toc-text">
          1.2.11 证书透明度公开日志枚举</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">3.</span> <span class="toc-text">
          1.3. 敏感信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-web%E6%BA%90%E4%BB%A3%E7%A0%81%E6%B3%84%E9%9C%B2"><span class="toc-number">3.1.</span> <span class="toc-text">
          1.3.1. web源代码泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-%E9%82%AE%E7%AE%B1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">3.2.</span> <span class="toc-text">
          1.3.2. 邮箱信息收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-%E5%8E%86%E5%8F%B2%E6%BC%8F%E6%B4%9E%E6%94%B6%E9%9B%86"><span class="toc-number">3.3.</span> <span class="toc-text">
          1.3.3. 历史漏洞收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-Burpsuite-%E7%9A%84Repeater%E5%8A%9F%E8%83%BD"><span class="toc-number">3.4.</span> <span class="toc-text">
          1.3.4 Burpsuite 的Repeater功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="toc-number">4.</span> <span class="toc-text">
          1.4. 指纹识别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E6%9F%A5%E6%89%BE%E7%9C%9F%E5%AE%9EIP"><span class="toc-number">5.</span> <span class="toc-text">
          1.5 查找真实IP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-1-%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E7%94%A8%E4%BA%86CDN"><span class="toc-number">5.1.</span> <span class="toc-text">
          1.5.1 判断是否用了CDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-2-%E7%BB%95%E8%BF%87CDN%E5%AF%BB%E6%89%BE%E7%9C%9F%E5%AE%9EIP"><span class="toc-number">5.2.</span> <span class="toc-text">
          1.5.2 绕过CDN寻找真实IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-3-%E9%AA%8C%E8%AF%81%E8%8E%B7%E5%8F%96%E7%9A%84IP"><span class="toc-number">5.3.</span> <span class="toc-text">
          1.5.3 验证获取的IP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E6%94%B6%E9%9B%86%E6%95%8F%E6%84%9F%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">
          1.6 收集敏感目录文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1DirBuster"><span class="toc-number">6.1.</span> <span class="toc-text">
          1.6.1DirBuster</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-%E8%B5%84%E4%BA%A7%E6%A2%B3%E7%90%86"><span class="toc-number">7.</span> <span class="toc-text">
          1.7. 资产梳理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-1-SRC%E4%BC%97%E6%B5%8B%E5%B9%B3%E5%8F%B0"><span class="toc-number">7.1.</span> <span class="toc-text">
          1.7.1.SRC众测平台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-2-%E5%9B%BD%E5%86%85%E5%B9%B3%E5%8F%B0"><span class="toc-number">7.2.</span> <span class="toc-text">
          1.7.2.国内平台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-3-%E5%9B%BD%E5%A4%96%E5%B9%B3%E5%8F%B0"><span class="toc-number">7.3.</span> <span class="toc-text">
          1.7.3.国外平台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-4-%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5"><span class="toc-number">7.4.</span> <span class="toc-text">
          1.7.4.威胁情报</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-5-%E7%A4%BE%E5%B7%A5%E5%BA%93"><span class="toc-number">7.5.</span> <span class="toc-text">
          1.7.5.社工库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-Google-Hack"><span class="toc-number">8.</span> <span class="toc-text">
          1.8. Google Hack</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-1-%E5%AE%9E%E6%88%98"><span class="toc-number">8.1.</span> <span class="toc-text">
          1.8.1.实战</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-Nmap-%E7%AB%AF%E6%89%AB"><span class="toc-number">9.</span> <span class="toc-text">
          1.9 Nmap 端扫</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-1-%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D"><span class="toc-number">9.1.</span> <span class="toc-text">
          1.9.1 功能介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-2-%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="toc-number">9.2.</span> <span class="toc-text">
          1.9.2.主机发现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-3-%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">9.3.</span> <span class="toc-text">
          1.9.3. 端口扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-4-%E7%89%88%E6%9C%AC%E4%BE%A6%E6%B5%8B"><span class="toc-number">9.4.</span> <span class="toc-text">
          1.9.4. 版本侦测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-5-OS-%E4%BE%A6%E6%B5%8B"><span class="toc-number">9.5.</span> <span class="toc-text">
          1.9.5. OS 侦测</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-10-%E6%89%A9%E5%B1%95-BurpAPP-%E6%8A%93%E5%8C%85"><span class="toc-number">10.</span> <span class="toc-text">
          1.10 扩展 BurpAPP 抓包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-11-%E6%89%A9%E5%B1%95-%E5%B8%B8%E8%A7%81%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">11.</span> <span class="toc-text">
          1.11. 扩展:常见信息泄露利用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-1-Git-%E5%AF%BC%E8%87%B4%E6%96%87%E4%BB%B6%E6%B3%84%E9%9C%B2"><span class="toc-number">11.1.</span> <span class="toc-text">
          1.11.1. Git 导致文件泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-2-DS-store-%E5%AF%BC%E8%87%B4%E6%96%87%E4%BB%B6%E6%B3%84%E9%9C%B2"><span class="toc-number">11.2.</span> <span class="toc-text">
          1.11.2. DS_store 导致文件泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-3-SVN-%E5%AF%BC%E8%87%B4%E6%96%87%E4%BB%B6%E6%B3%84%E9%9C%B2"><span class="toc-number">11.3.</span> <span class="toc-text">
          1.11.3. SVN 导致文件泄露</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-4-WEB-INF-web-xml-%E6%B3%84%E9%9C%B2"><span class="toc-number">11.4.</span> <span class="toc-text">
          1.11.4. WEB-INF&#x2F;web.xml 泄露</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-12-%E6%89%A9%E5%B1%95-ZoomEye-hack"><span class="toc-number">12.</span> <span class="toc-text">
          1.12 扩展: ZoomEye hack</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-13-%E6%89%A9%E5%B1%95%EF%BC%9Afofa-hack"><span class="toc-number">13.</span> <span class="toc-text">
          1.13. 扩展：fofa hack</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/logo.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">Sculptor</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/Sculptor-liu/" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="https://blog.csdn.net/weixin_45798017" target="_blank" rel="noopener" data-popover="social.csdn" data-popover-pos="up"><span class="sidebar-ov-social-item__icon">csdn</span></a></div><div class="sidebar-ov-feed"><span class="sidebar-ov-feed-email"><a class="sidebar-ov-feed-email__link" href="https://mail.qq.com/" target="_blank" rel="noopener"><span class="sidebar-ov-feed-email__icon"><i class="fas fa-envelope"></i></span><span>Email 订阅</span></a></span></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">47</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">5</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">22</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-cn" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Sculptor</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v5.1.1</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.1.1</span></div><div class="busuanzi"><span class="busuanzi-siteuv"><span class="busuanzi-siteuv__icon"><i class="fas fa-user"></i></span><span class="busuanzi-siteuv__info">访问人数</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_uv"></span></span><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">浏览总量</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章（支持多关键词，请用空格分隔）"></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><script>function initSearch() {
  var isXML = true;
  var search_path = 'search.xml';

  if (!search_path) {
    search_path = 'search.xml';
  } else if (/json$/i.test(search_path)) {
    isXML = false;
  }

  var path = '/' + search_path;
  $.ajax({
    url: path,
    dataType: isXML ? 'xml' : 'json',
    async: true,
    success: function (res) {
      var datas = isXML ? $('entry', res).map(function () {
        // 将 XML 转为 JSON
        return {
          title: $('title', this).text(),
          content: $('content', this).text(),
          url: $('url', this).text()
        };
      }).get() : res;
      var $input = $('.search-input input');
      var $result = $('.search-results');
      // 搜索对象（标题、内容）的权重，影响显示顺序
      var WEIGHT = { title: 100, content: 1 };
      var searchPost = function () {
        var searchText = $input.val().toLowerCase().trim();
        // 根据空白字符分隔关键字
        var keywords = searchText.split(/[\s]+/);
        // 搜索结果
        var matchPosts = [];

        // 有多个关键字时，将原文字整个保存下来
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        // 防止未输入字符时搜索
        if (searchText.length > 0) {
          datas.forEach(function (data) {
            var isMatch  = false;
            // 没有标题的文章使用预设的 i18n 变量代替
            var title = (data.title && data.title.trim()) || '[ 文章无标题 ]';
            var titleLower = title && title.toLowerCase();
            // 删除 HTML 标签 和 所有空白字符
            var content = data.content && data.content.replace(/<[^>]+>/g, '');
            var contentLower = content && content.toLowerCase();
            // 删除重复的 /
            var postURL = data.url && decodeURI(data.url).replace(/\/{2,}/g, '/');
            // 标题中匹配到的关键词
            var titleHitSlice = [];
            // 内容中匹配到的关键词
            var contentHitSlice = [];

            keywords.forEach(function (keyword) {
              /**
              * 获取匹配的关键词的索引
              * @param {String} keyword 要匹配的关键字
              * @param {String} text 原文字
              * @param {Boolean} caseSensitive 是否区分大小写
              * @param {Number} weight 匹配对象的权重。权重大的优先显示
              * @return {Array}
              */
              function getIndexByword (word, text, caseSensitive, weight) {
                if (!word || !text) {
                  return [];
                };

                var startIndex = 0; // 每次匹配的开始索引
                var index = -1;     // 匹配到的索引值
                var result = [];    // 匹配结果

                if (!caseSensitive) {
                  word = word.toLowerCase();
                  text = text.toLowerCase();
                }

                while((index = text.indexOf(word, startIndex)) !== -1) {
                  var hasMatch = false;
                  // 索引位置相同的关键词，保留长度较长的
                  titleHitSlice.forEach(function (hit) {
                    if (hit.index === index && hit.word.length < word.length) {
                      hit.word = word;
                      hasMatch = true;
                    }
                  });
                  startIndex = index + word.length;
                  !hasMatch && result.push({ index: index, word: word, weight: weight });
                }
                return result;
              }
              titleHitSlice = titleHitSlice.concat(getIndexByword(keyword, titleLower, false, WEIGHT.title));
              contentHitSlice = contentHitSlice.concat(getIndexByword(keyword, contentLower, false, WEIGHT.content));
            });

            var hitTitle = titleHitSlice.length;
            var hitContent = contentHitSlice.length;

            if (hitTitle > 0 || hitContent > 0) {
              isMatch = true;
            }
            if (isMatch) {
              ;[titleHitSlice, contentHitSlice].forEach(function (hit) {
                // 按照匹配文字的索引的递增顺序排序
                hit.sort(function (left, right) {
                  return left.index - right.index;
                });
              });
              /**
              * 给文本中匹配到的关键词添加标记，从而进行高亮显示
              * @param {String} text 原文本
              * @param {Array} hitSlice 匹配项的索引信息
              * @param {Number} start 开始索引
              * @param {Number} end 结束索引
              * @return {String}
              */
              function highlightKeyword (text, hitSlice, start, end) {
                if (!text || !hitSlice || !hitSlice.length) {
                  return;
                }

                var result = '';
                var startIndex = start;
                var endIndex = end;
                hitSlice.forEach(function (hit) {
                  if (hit.index < startIndex) {
                    return;
                  }

                  var hitWordEnd = hit.index + hit.word.length;
                  result += text.slice(startIndex, hit.index);
                  result += '<b>' + text.slice(hit.index, hitWordEnd) + '</b>';
                  startIndex = hitWordEnd;
                });
                result += text.slice(startIndex, endIndex);
                return result;
              }

              var postData = {};
              // 文章总的搜索权重
              var postWeight = titleHitSlice.length * WEIGHT.title + contentHitSlice.length * WEIGHT.content;
              // 标记匹配关键词后的标题
              var postTitle = highlightKeyword(title, titleHitSlice, 0, title.length) || title;
              // 标记匹配关键词后的内容
              var postContent;
              // 显示内容的长度
              var SHOW_WORD_LENGTH = 200;
              // 命中关键词前的字符显示长度
              var SHOW_WORD_FRONT_LENGTH = 20;
              var SHOW_WORD_END_LENGTH = SHOW_WORD_LENGTH - SHOW_WORD_FRONT_LENGTH;

              // 截取匹配的第一个字符，前后共 200 个字符来显示
              if (contentHitSlice.length > 0) {
                var firstIndex = contentHitSlice[0].index;
                var start = firstIndex > SHOW_WORD_FRONT_LENGTH ? firstIndex - SHOW_WORD_FRONT_LENGTH : 0;
                var end = firstIndex + SHOW_WORD_END_LENGTH;
                postContent = highlightKeyword(content, contentHitSlice, start, end);
              } else { // 未匹配到内容，直接截取前 200 个字符来显示
                postContent = content.slice(0, SHOW_WORD_LENGTH);
              }
              postData.title = postTitle;
              postData.content = postContent;
              postData.url = postURL;
              postData.weight = postWeight;
              matchPosts.push(postData);
            }
          });
        }

        var resultInnerHtml = '';
        if (matchPosts.length) {
          // 按权重递增的顺序排序，使权重大的优先显示
          matchPosts.sort(function (left, right) {
            return right.weight - left.weight;
          });
          resultInnerHtml += '<ul>';
          matchPosts.forEach(function (post) {
            resultInnerHtml += '<li><a class="search-results-title" href="' + post.url + '">';
            resultInnerHtml += post.title;
            resultInnerHtml += '</a><div class="search-results-content">';
            resultInnerHtml += post.content;
            resultInnerHtml += '</div></li>';
          });
          resultInnerHtml += '</ul>';
        } else {
          resultInnerHtml += '<div class="search-results-none"><i class="far fa-meh"></i></div>';
        }
        $result.html(resultInnerHtml);
      };
      $input.on('input', searchPost);
      $input.on('keyup', function (e) {
        if (e.keyCode === Stun.utils.codeToKeyCode('Enter')) {
          searchPost();
        }
      });
    }
  });
}

function closeSearch () {
  $('body').css({ overflow: 'auto' });
  $('.search-popup').css({ display: 'none' });
  $('.search-mask').css({ display: 'none' });
}

window.addEventListener('DOMContentLoaded', function () {
  Stun.utils.pjaxReloadLocalSearch = function () {
    $('.header-nav-search').on('click', function (e) {
      e.stopPropagation();
      $('body').css('overflow', 'hidden');
      $('.search-popup')
        .velocity('stop')
        .velocity('transition.expandIn', {
          duration: 300,
          complete: function () {
            $('.search-popup input').focus();
          }
        });
      $('.search-mask')
        .velocity('stop')
        .velocity('transition.fadeIn', {
          duration: 300
        });

      initSearch();
    });
    $('.search-mask, .search-close').on('click', function () {
      closeSearch();
    });
    $(document).on('keydown', function (e) {
      // Escape <=> 27
      if (e.keyCode === Stun.utils.codeToKeyCode('Escape')) {
        closeSearch();
      }
    });
  };

  Stun.utils.pjaxReloadLocalSearch();
}, false);</script><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-md5@latest/src/md5.min.js"></script><script>function loadGitalk () {
  if (!document.getElementById('gitalk-container')) {
    return;
  }

  var gitalk = new Gitalk({
    id: md5(window.location.pathname.slice(1)),
    clientID: '28f6b94423100cc8a01d',
    clientSecret: '812ec412a6abb31e41feedc3fa3ba97eefa1a882',
    repo: 'Sculptor-liu.github.io',
    owner: 'Sculptor-liu',
    admin: ['Sculptor-liu'],
    distractionFreeMode: 'false',
    language: 'zh-CN'
  });
  gitalk.render('gitalk-container');
}

if (false) {
  loadGitalk();
} else {
  window.addEventListener('DOMContentLoaded', loadGitalk, false);
}</script><script src="/js/utils.js?v=2.1.1"></script><script src="/js/stun-boot.js?v=2.1.1"></script><script src="/js/scroll.js?v=2.1.1"></script><script src="/js/header.js?v=2.1.1"></script><script src="/js/sidebar.js?v=2.1.1"></script><script type="application/json" src="/search.xml"></script></body></html>