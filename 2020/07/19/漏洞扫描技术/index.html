<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/logo.jpg?v=2.1.1" type="image/png" sizes="16x16"><link rel="icon" href="/images/logo.jpg?v=2.1.1" type="image/png" sizes="32x32"><meta name="description" content="一，漏洞扫描技术                           1.1扫描原理                           1.1.1. Ping 检测       win+R -&gt; cmd -&gt; ping + 目标IP 当 ping 通目标 IP 后 返回 TTL值判断目标 IP 的操作系统">
<meta property="og:type" content="article">
<meta property="og:title" content="漏洞扫描技术">
<meta property="og:url" content="https://sculptor-liu.github.io/2020/07/19/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E6%8A%80%E6%9C%AF/index.html">
<meta property="og:site_name" content="Sculptor&#39;s blog">
<meta property="og:description" content="一，漏洞扫描技术                           1.1扫描原理                           1.1.1. Ping 检测       win+R -&gt; cmd -&gt; ping + 目标IP 当 ping 通目标 IP 后 返回 TTL值判断目标 IP 的操作系统">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-07-19T15:11:11.606Z">
<meta property="article:modified_time" content="2020-09-23T12:30:47.557Z">
<meta property="article:author" content="Sculptor">
<meta property="article:tag" content="漏洞扫描">
<meta name="twitter:card" content="summary"><title>漏洞扫描技术 | Sculptor's blog</title><link ref="canonical" href="https://sculptor-liu.github.io/2020/07/19/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E6%8A%80%E6%9C%AF/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.1.1"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":true},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: true,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.1.1"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/friends/"><span class="header-nav-menu-item__icon"><i class="fas fa-link"></i></span><span class="header-nav-menu-item__text">友链</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-info-circle"></i></span><span class="header-nav-menu-item__text">关于我</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">搜索</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">Sculptor's blog</div><div class="header-banner-info__subtitle">不知名的陌生人</div></div><div class="header-banner-arrow"><div class="header-banner-arrow__icon"><i class="fas fa-angle-down"></i></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">漏洞扫描技术</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2020-07-19</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2020-09-23</span></span><span class="post-meta-item post-meta-item--visitors"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">阅读次数</span><span class="post-meta-item__value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body">
        <h1 id="一，漏洞扫描技术">
          <a href="#一，漏洞扫描技术" class="heading-link"><i class="fas fa-link"></i></a>一，漏洞扫描技术</h1>
      
        <h2 id="1-1扫描原理">
          <a href="#1-1扫描原理" class="heading-link"><i class="fas fa-link"></i></a>1.1扫描原理</h2>
      
        <h3 id="1-1-1-Ping-检测">
          <a href="#1-1-1-Ping-检测" class="heading-link"><i class="fas fa-link"></i></a>1.1.1. Ping 检测</h3>
      <p>win+R -&gt; cmd -&gt; ping + 目标IP</p>
<p>当 ping 通目标 IP 后 返回 TTL值判断目标 IP 的操作系统</p>
<a id="more"></a>

<p>TTL=128：可能是 windows xp/2000/2003 系统</p>
<p>TTL=64：可能是 windows 7/2008/10 系统，Linux系统</p>
<p>TTL=255：可能是交换机，路由器设备</p>

        <h3 id="1-1-2-端口扫描">
          <a href="#1-1-2-端口扫描" class="heading-link"><i class="fas fa-link"></i></a>1.1.2. 端口扫描</h3>
      <p>win+R -&gt; cmd -&gt; telnet + 目标IP + 目标端口号</p>
<p>注意：扫描器的运作是基于 TCP/IP 的，个人计算机，服务器主机或者防火墙和路由器都适用。扫描信息的来源基本都必须依赖于端口，即必须某端口对外开放，才可以以此判断主机上运行的操作系统，服务软件类型及版本等。例如：使用 ftp.exe 连接主机，判断主机 FTP 服务程序类型和版本，如果 FTP 服务对应的 21 端口无法访问，则得不到任何信息。</p>

        <h2 id="1-2-扫描分类">
          <a href="#1-2-扫描分类" class="heading-link"><i class="fas fa-link"></i></a>1.2. 扫描分类</h2>
      <ol>
<li>开放扫描：</li>
<li>半开放扫描：</li>
<li>隐蔽扫描：</li>
<li>扫射扫描：</li>
<li>其他扫描：</li>
</ol>

        <h2 id="1-3-扫描前准备">
          <a href="#1-3-扫描前准备" class="heading-link"><i class="fas fa-link"></i></a>1.3.扫描前准备</h2>
      <ol>
<li>了解网络的部署情况，企业的 需要/不需要/不能 扫描（有些扫描可能造成网络瘫痪）</li>
<li>扫描时间和方式（正常来说都是在凌晨，半夜进行扫描，这个时间段访问的用户比较少）</li>
<li>定制好扫描策略（针对于 漏洞/端口/弱口令/全部 扫描）</li>
<li>防火墙是否开启（防火墙开启的情况下，默认是扫描不到的）</li>
<li>企业服务是否配置了相关的安全策略，以访锁死（注意）（比如说：数据库设置3次密码，针对那些弱口令的暴力破解）</li>
</ol>

        <h2 id="1-4-常见的扫描工具">
          <a href="#1-4-常见的扫描工具" class="heading-link"><i class="fas fa-link"></i></a>1.4. 常见的扫描工具</h2>
      <ol>
<li>SuperScan</li>
<li>Fluxay（流光）</li>
<li>X-Scan</li>
<li>MBSA</li>
<li>Wikto</li>
<li>NMAP</li>
<li>天镜（启明）</li>
<li>极光（绿盟）</li>
</ol>
<p>国外：Arachni（开源的，kali中自带），HP WebInspect，IBM AppScan，Acunetix WVS（AWVS），Nessus，Nexpose，Netspaker…</p>
<p>国内：绿盟科技，杭州安恒，知道创宇，启明星辰…</p>

        <h2 id="1-5-X-scan-的简写使用">
          <a href="#1-5-X-scan-的简写使用" class="heading-link"><i class="fas fa-link"></i></a>1.5. X-scan 的简写使用</h2>
      <ol>
<li><p>设置—&gt;扫描参数</p>
<p>这里可以设置 扫描目标 IP 或者网段</p>
<p>或者把要扫描的目标网址或者IP放到记事本里，通过”从文件获取主机列表”进行扫描</p>
<p>1）全局设置</p>
<p>扫描模块：一般默认，但是想怎么扫就勾上要扫的模块</p>
<p>并发扫描：根据自己电脑性能来决定并发扫描数量</p>
<p>扫描报告：一般采用网页报告就是 HTML 格式的（选择扫描完自动生成扫描列表）</p>
<p>2）其他设置</p>
<p>跳过没有响应的主机：默认的一般是这个，扫描比较快（方式：ping/telent）</p>
<p>无条件扫描：不管主机是否禁止，这种扫描比较慢</p>
<p>3）插件设置</p>
<p>字典文件设置：默认字典都比较弱，可以自己编辑添加，这都在 dat 这个文件夹里</p>
</li>
<li><p>工具</p>
<p>物理地址查询：判断扫描的IP地址和你自己主机的关系</p>
<p>ARP query：扫描 Mac地址 和 IP地址</p>
<p>Whois：查询域名，在网站中用到</p>
<p>Trace roots：测试路由情况，most name 就是目标网站的IP（ping网站 就能得到）</p>
<p>Ping：和window自带的ping一样</p>
</li>
</ol>

        <h2 id="1-6-AppScan">
          <a href="#1-6-AppScan" class="heading-link"><i class="fas fa-link"></i></a>1.6. AppScan</h2>
      <p><strong>功能介绍</strong></p>
<p>AppScan 是 web 应用程序渗透测试舞台上使用最广泛的工具之一，它是一个桌面应用程序，有助于专业安全人员进行 web 应用程序自动化脆弱性评估。</p>
<p>AppScan 其实是一个产品家族，包括众多的应用安全扫描产品，从开发阶段的源代码扫描的 AppScan source edition ，到针对 web 应用程序的快速扫描的 AppScan standard edition 以及进行安全管理和汇总整合的 AppScan enteprise edition 等，我们经常说的只是桌面的 AppScan ，即 AppScan standard edition ，其安装在 window 操作系统下，可以对网站等 web应用程序进行自动化的应用安全扫描和测试。</p>
<p>它需要 微软 C++ 2017 和 微软 .NET Framework4 4.7.2 Full 框架（所以就下载到虚拟机里，但是虚拟机 win 下下载时也没单独下载这个框架）</p>
<p>下载路径：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="https://www.52pojie.cn/thread-1189130-1-1.html">https://www.52pojie.cn/thread-1189130-1-1.html</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="1-6-1-实例">
          <a href="#1-6-1-实例" class="heading-link"><i class="fas fa-link"></i></a>1.6.1.实例</h3>
      <p>打开phpstudy，开启一台机器作为站点</p>
<p>文件-&gt;新建-&gt;常规模块（一般来说的）</p>
<ol>
<li><p>AppScan（自动或手动）(一般常选)</p>
<p>外部设备/客户机（AppScan作为记录代理）</p>
</li>
<li><p>从该url 启动扫描：扫哪个就填哪个站点</p>
</li>
<li><p>仅扫描此目录中或目录下的链接：就是选中的站点</p>
<p>将所有路径作为区分大小写来处理：这个包括第三方目录（该域名下的调用的第三方地址）</p>
</li>
<li><p>有点的站点可能需要账户密码才能扫描。</p>
</li>
<li><p>测试策略：</p>
<p>可以直接用默认的 Default（缺省值）</p>
</li>
<li><p>如何启动：</p>
<p>全面自动：一般选用这个就行了，立即扫描</p>
<p>稍后自动：就是先爬取网站，到达一定时间然后再扫描。</p>
</li>
<li><p>保存：</p>
<p>是：就会新建文件，扫描的会话就会保存在这个文件里</p>
</li>
<li><p>配置：</p>
<p>显示了以上的配置</p>
<p>可以单独点开查看，有的可以导入/导出</p>
</li>
<li><p>报告：</p>
<p>模板：有好几种，根据不同要求选择</p>
</li>
</ol>
<p><strong>注意：</strong></p>
<p>有的时候AppScan 扫描一个网站会导致这个网站崩溃（例如：银行，内容比较多，扫描的时间就比较久），或者扫描的过程中遇到错误，自动暂停了；这时我们就可以选择保存，这样我们就可以在下次扫描时接着上一次扫描的位置接着扫描。</p>
<p><strong>缺点：</strong></p>
<p>软件比较大，占内存。同时，它扫描速度也比较慢。它在国内的扫描力度不行，但是通用漏洞扫描比较强大。</p>

        <h2 id="1-7-AWVS">
          <a href="#1-7-AWVS" class="heading-link"><i class="fas fa-link"></i></a>1.7. AWVS</h2>
      <p><strong>功能介绍</strong></p>
<p>AWVS 是一个自动化的 web应用程序测试工具，通过检查可利用的漏洞，黑客可以审核 web 应用程序的安全性。</p>

        <h3 id="1-7-1-Dashboard-仪表板">
          <a href="#1-7-1-Dashboard-仪表板" class="heading-link"><i class="fas fa-link"></i></a>1.7.1. Dashboard 仪表板</h3>
      <p>显示扫描的运行以及爬取状态，显示漏洞个数和级别</p>

        <h3 id="1-7-2-Targets-添加扫描目标">
          <a href="#1-7-2-Targets-添加扫描目标" class="heading-link"><i class="fas fa-link"></i></a>1.7.2. Targets 添加扫描目标</h3>
      <ol>
<li><p>General</p>
<p>Address：添加扫描IP</p>
<p>Description：设置扫描描述。</p>
<p>site login：登录扫描，有些时候扫描要登录。</p>
<p>use pre-recorrded login sequence：以保存的形式进行扫描，就是在登录的时候，把扫描的请求构成一个文件进行添加。</p>
<p>AcuSensor：就是在扫描前对目标网站判断是 php,aspx,jsp，用于减少误报，如果要用这个功能，就要在线下载这个文件（一般来说，也是很少用这个功能的）。</p>
</li>
<li><p>Crawl </p>
<p>User Agent：使用的头，可以用于伪造 Firefox，Chrome 等（访问的头）。</p>
<p>Exclude Path：排除扫描的路径。</p>
<p>Import Files：可以导入上一次没有扫完但是保存下来的文件进行接着扫描。</p>
</li>
<li><p>HTTP</p>
<p>HTTP Authentication：HTTP认证，就是有些网站得要登录，否则爬取不了登录后的页面信息。</p>
<p>Client Certificate：客户端证书，特殊的网站需要证书，导入进来就行了。</p>
<p>Proxy Server：HTTP代理功能。</p>
</li>
<li><p>Advanced：高级功能(一般不做）</p>
<p>Technologies：检测相应的 asp,php..</p>
</li>
<li><p>Scan Type：扫描类型</p>
<p>默认情况下是进行全方位扫描</p>
</li>
<li><p>Report：生成报告（各类模板，但是都是英文的）</p>
</li>
<li><p>Schedule：可以保持不变（instant），也可以自己修改，可以在特定时间段反复扫描</p>
</li>
</ol>

        <h3 id="1-7-3-Settings">
          <a href="#1-7-3-Settings" class="heading-link"><i class="fas fa-link"></i></a>1.7.3. Settings</h3>
      <ol>
<li>Notification Settings：设置邮件发送告知工作人员扫描完成。</li>
</ol>

        <h2 id="1-8-HP-WebInspect">
          <a href="#1-8-HP-WebInspect" class="heading-link"><i class="fas fa-link"></i></a>1.8. HP WebInspect</h2>
      <p>HP WebInspect 是一款文件大，系统资源占用更大的扫描软件，在安装后会开机自启很多功能繁琐的进程和服务，所以尽量将其安装在虚拟机中，操作系统在 win7以上，确保其支持 .Net Framework 4.5x 和 SQL Server 2012，开启前还需运行 services.msc 工具检查 SQL 和 WebInspect 系列服务是否正确启动，以防扫描时出现致命的错误中断，10.30版本可能需要 VPN。</p>
<p>优点：扫描 出来的报告是最全的。</p>

        <h3 id="1-8-1-实例">
          <a href="#1-8-1-实例" class="heading-link"><i class="fas fa-link"></i></a>1.8.1. 实例</h3>
      <ol>
<li><p>文件 -&gt; 新建</p>
</li>
<li><p>Start URL：输入要扫描的网站</p>
</li>
<li><p>点击右面的 verify：显示网站（确保网站可以访问）</p>
</li>
<li><p>next button=&gt;：下一步（返回了 start url 的页面）</p>
</li>
<li><p>Scan Type：扫描类型（就用默认的 standard 就好了）</p>
</li>
<li><p>Scan Method：扫描模型（Crawl and Audit：爬行和审计 都有）</p>
</li>
<li><p>Policy：standard 就好了（里面还有单独的选项，如 SQL 之类的）</p>
</li>
<li><p>Gudie Scan 页面=&gt;：下一步</p>
</li>
<li><p>Use a login macro for this site：登录扫描</p>
<p>create：创建，跳转页面后是一个录制的过程（右边红⚪）</p>
<p>stop：停止录制</p>
<p>上面的 play 是模拟登录，看是否有问题</p>
</li>
<li><p>紧接着后面的 =&gt; 进行下一步</p>
</li>
<li><p>Profiler：运行策略，保持默认就好了，setting 也保持默认 ✔</p>
</li>
<li><p>Configure Detailed Options：里面的就是默认选项</p>
</li>
<li><p>Validate Settings and Start Scan 页面：上面 Save ，保持策略，下次扫描可以直接导入这个扫描策略。</p>
</li>
<li><p>Start Scan：开始扫描</p>
</li>
<li><p>Reports：报告输出</p>
<p>Generate report-&gt;next-&gt;</p>
</li>
</ol>
<p>特点：一边扫描，一边爬取，而AppScan 是先爬取后扫描</p>

        <h2 id="1-9-Netspaker">
          <a href="#1-9-Netspaker" class="heading-link"><i class="fas fa-link"></i></a>1.9. Netspaker</h2>
      <p>效果比 AWVS 差很多。</p>

        <h2 id="1-10-WVSS">
          <a href="#1-10-WVSS" class="heading-link"><i class="fas fa-link"></i></a>1.10. WVSS</h2>
      <p>绿盟的安全系统（要钱，没有破解版的）</p>

        <h2 id="1-11-安恒明鉴">
          <a href="#1-11-安恒明鉴" class="heading-link"><i class="fas fa-link"></i></a>1.11. 安恒明鉴</h2>
      <p>安恒的漏洞弱口令扫描工具（要钱，没破解版的）</p>

        <h2 id="1-12-Nessus">
          <a href="#1-12-Nessus" class="heading-link"><i class="fas fa-link"></i></a>1.12. Nessus</h2>
      
        <h3 id="1-12-1-功能">
          <a href="#1-12-1-功能" class="heading-link"><i class="fas fa-link"></i></a>1.12.1.功能</h3>
      <ol>
<li><p>Scan</p>
<p>Advanced Scan：高级扫描(默认)</p>
</li>
<li><p>Policies</p>
<p>Setting Type：根据自己情况</p>
<p>Port Scanning：端口设置扫描；设置端口扫描是十分重要的，直接关系扫描结果的准确性，如果是 default 的话就是默认的端口，如果输入 1-65535 就是1-65535 的所有端口，这样耗时很长，建议新手用 default。</p>
<p>Plugins：插件项目，选择合适的插件，搜索 denial ，列出所有拒绝服务检测的插件，点击“ENABLE”，禁止 Nessus 使用这些插件扫描，因为这些插件扫描可能造成目标系统宕机，应该排除掉。（默认是开启状态的，绿色的；禁止后是DISABLED红色的，意思是这个插件不再使用）</p>
</li>
<li><p>Schedule：可以设置扫描时间进行计划任务</p>
</li>
<li><p>右上角 点-&gt;sign out：设置完要退出</p>
</li>
<li><p>再次登录账户密码，新建扫扫描就会发现可以使用刚才设置的了</p>
</li>
<li><p>Upload Target：可以导入一个包含所有 IP 的 txt 文件</p>
</li>
<li><p>Lanch：点击，可以进行漏洞扫描</p>
</li>
</ol>
<p>点击 scan1 可以得到扫描结果。</p>

        <h3 id="1-12-2-实例">
          <a href="#1-12-2-实例" class="heading-link"><i class="fas fa-link"></i></a>1.12.2. 实例</h3>
      <p>步骤：</p>
<ol>
<li><p>Policies页面</p>
<p>先 Advance Scan 新建一个策略模板</p>
<p>General：策略名称，描述</p>
<p>Permission：选择 can use</p>
<p>后面的默认好了</p>
<p>Plugins：右上角搜索 denial，把得出的 disable掉</p>
<p>save 保存模板，这样策略模板就新建成功了。</p>
</li>
<li><p>My Scan页面</p>
<p>New Scan：右上角，新建扫描</p>
<p>Advance scan：默认扫描策略</p>
<p>/user Defined选择自定义添加的扫描策略</p>
<p>输入任务名称，扫描IP地址，点击save即可看到新增的扫描任务</p>
<p>launch：启动扫描任务，可看到任务正在running</p>
</li>
</ol>

        <h2 id="1-13-Nexpose">
          <a href="#1-13-Nexpose" class="heading-link"><i class="fas fa-link"></i></a>1.13. Nexpose</h2>
      <p>VM 虚拟机 ova 版本下载地址：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://download2.rapid7.com/download/NeXpose-v4/NexposeVA.ova">http://download2.rapid7.com/download/NeXpose-v4/NexposeVA.ova</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> 或者 <span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://www.rapid7.com/products/nexpose/download.jsp">http://www.rapid7.com/products/nexpose/download.jsp</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>ova 版本的账户密码：nexpose</p>
<p>最大的优点：这个软件和 MSF 一起使用（它们是同一个公司出的）</p>

        <h2 id="1-14-启明天镜（BS-版）">
          <a href="#1-14-启明天镜（BS-版）" class="heading-link"><i class="fas fa-link"></i></a>1.14. 启明天镜（BS 版）</h2>
      <p>天镜脆弱性扫描与管理系统</p>
<p>免费 3 个月的使用，还原虚拟机（或者修改日期）又可以免费使用。（但是没有找到资源）</p>

        <h2 id="1-15-RSAS（绿盟）">
          <a href="#1-15-RSAS（绿盟）" class="heading-link"><i class="fas fa-link"></i></a>1.15. RSAS（绿盟）</h2>
      <p>系统和 Web 可以同时扫描。</p>

        <h1 id="二，漏洞扫描评估方案讲解">
          <a href="#二，漏洞扫描评估方案讲解" class="heading-link"><i class="fas fa-link"></i></a>二，漏洞扫描评估方案讲解</h1>
      
        <h2 id="2-1-测试目的">
          <a href="#2-1-测试目的" class="heading-link"><i class="fas fa-link"></i></a>2.1. 测试目的</h2>
      
        <h3 id="2-1-1-测试目的">
          <a href="#2-1-1-测试目的" class="heading-link"><i class="fas fa-link"></i></a>2.1.1. 测试目的</h3>
      <p>通过了解各家厂商的设备性能和功能是否能够满足当前业务需要。</p>

        <h3 id="2-1-2-测试对象">
          <a href="#2-1-2-测试对象" class="heading-link"><i class="fas fa-link"></i></a>2.1.2. 测试对象</h3>
      <ol>
<li>绿盟科技 Web 应用漏洞扫描系统</li>
<li>杭州安恒网站安全监测平台</li>
<li>知道创宇 WEBSOC 网站立体监控系统</li>
<li>启明星辰</li>
</ol>

        <h3 id="2-1-3-测试内容">
          <a href="#2-1-3-测试内容" class="heading-link"><i class="fas fa-link"></i></a>2.1.3. 测试内容</h3>
      <ol>
<li>功能测试：包括扫描漏报测试，漏洞误报测试，页面发现测试，管理功能测试。</li>
<li>性能测试：包括扫描速度测试，平均速率测试，最大速率测试。</li>
<li>可靠性测试：包括断电恢复测试，断点续扫测试。</li>
</ol>

        <h3 id="2-1-4-测试环境">
          <a href="#2-1-4-测试环境" class="heading-link"><i class="fas fa-link"></i></a>2.1.4. 测试环境</h3>
      <ol>
<li><p>网络拓扑</p>
</li>
<li><p>测试目标机构</p>
</li>
</ol>

        <h2 id="2-2-测试案例">
          <a href="#2-2-测试案例" class="heading-link"><i class="fas fa-link"></i></a>2.2. 测试案例</h2>
      <p>首先要找那种漏洞多的网站进行测试</p>

        <h3 id="2-2-1-扫描功能和相关性能测试">
          <a href="#2-2-1-扫描功能和相关性能测试" class="heading-link"><i class="fas fa-link"></i></a>2.2.1. 扫描功能和相关性能测试</h3>
      <ol>
<li>漏报数</li>
<li>误报数</li>
<li>页面发现数</li>
<li>扫描速率</li>
<li>平均速率</li>
<li>最大速率</li>
<li>…</li>
</ol>

        <h3 id="2-2-2-管理功能测试">
          <a href="#2-2-2-管理功能测试" class="heading-link"><i class="fas fa-link"></i></a>2.2.2. 管理功能测试</h3>
      <p>按照工作流分别对任务管理，报表管理，分布式管理功能按照测试表逐项测试。</p>

        <h3 id="2-2-3-可靠性测试">
          <a href="#2-2-3-可靠性测试" class="heading-link"><i class="fas fa-link"></i></a>2.2.3. 可靠性测试</h3>
      <ol>
<li>断电恢复测试：扫描过程突然断电，查看扫描引擎是否能够对任务信息，扫描过程信息，关键配置信息，模板信息等进行备份或保存。</li>
<li>断点续扫测试：扫描任务暂停或意外中断后再恢复，查看任务是否正常。</li>
</ol>

        <h2 id="2-3-测试结果">
          <a href="#2-3-测试结果" class="heading-link"><i class="fas fa-link"></i></a>2.3. 测试结果</h2>
      
        <h3 id="2-3-1-扫描功能和相关测试性能">
          <a href="#2-3-1-扫描功能和相关测试性能" class="heading-link"><i class="fas fa-link"></i></a>2.3.1. 扫描功能和相关测试性能</h3>
      
        <h3 id="2-3-2-管理功能测试">
          <a href="#2-3-2-管理功能测试" class="heading-link"><i class="fas fa-link"></i></a>2.3.2. 管理功能测试</h3>
      
        <h3 id="2-3-3-可靠性测试">
          <a href="#2-3-3-可靠性测试" class="heading-link"><i class="fas fa-link"></i></a>2.3.3. 可靠性测试</h3>
      
        <h2 id="2-4-相关扫描软件测试评估">
          <a href="#2-4-相关扫描软件测试评估" class="heading-link"><i class="fas fa-link"></i></a>2.4. 相关扫描软件测试评估</h2>
      <p>国外软件：<span class="exturl"><a class="exturl__link" target="_blank" rel="noopener" href="http://sectoolmarket.com/wivet-score-unified-list.html%EF%BC%88%E4%B8%8D%E4%B8%80%E5%AE%9A%E5%BE%88%E5%87%86%E7%A1%AE%EF%BC%89">http://sectoolmarket.com/wivet-score-unified-list.html（不一定很准确）</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="https://sculptor-liu.github.io">Sculptor</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="https://sculptor-liu.github.io/2020/07/19/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E6%8A%80%E6%9C%AF/">https://sculptor-liu.github.io/2020/07/19/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E6%8A%80%E6%9C%AF/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-cn" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://sculptor-liu.github.io/tags/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F/">漏洞扫描</a></span></div><div class="post-share"><div class="social-share" data-sites="qzone, qq, weibo, wechat, douban, linkedin, facebook, twitter, google">Share to: </div></div><div class="post-reward reward"><div class="reward-button">请我喝杯咖啡~</div><div class="reward-qrcode"><span class="reward-qrcode-alipay"><img class="reward-qrcode-alipay__img" src="/images/ali_pay.png"><div class="reward-qrcode-alipay__text">支付宝打赏</div></span><span class="reward-qrcode-wechat"><img class="reward-qrcode-wechat__img" src="/images/wechat_pay.png"><div class="reward-qrcode-wechat__text">微信打赏</div></span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2020/07/25/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E7%B1%BB%20Burpsuite/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">漏洞扫描类 Burpsuite</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2020/07/08/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"><span class="paginator-prev__text">信息收集</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div><div class="comments" id="comments"><div id="gitalk-container"></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%EF%BC%8C%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E6%8A%80%E6%9C%AF"><span class="toc-number">1.</span> <span class="toc-text">
          一，漏洞扫描技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E6%89%AB%E6%8F%8F%E5%8E%9F%E7%90%86"><span class="toc-number">1.1.</span> <span class="toc-text">
          1.1扫描原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-Ping-%E6%A3%80%E6%B5%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">
          1.1.1. Ping 检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">
          1.1.2. 端口扫描</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E6%89%AB%E6%8F%8F%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">
          1.2. 扫描分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%89%AB%E6%8F%8F%E5%89%8D%E5%87%86%E5%A4%87"><span class="toc-number">1.3.</span> <span class="toc-text">
          1.3.扫描前准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E5%B8%B8%E8%A7%81%E7%9A%84%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7"><span class="toc-number">1.4.</span> <span class="toc-text">
          1.4. 常见的扫描工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-X-scan-%E7%9A%84%E7%AE%80%E5%86%99%E4%BD%BF%E7%94%A8"><span class="toc-number">1.5.</span> <span class="toc-text">
          1.5. X-scan 的简写使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-AppScan"><span class="toc-number">1.6.</span> <span class="toc-text">
          1.6. AppScan</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1-%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.6.1.</span> <span class="toc-text">
          1.6.1.实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-AWVS"><span class="toc-number">1.7.</span> <span class="toc-text">
          1.7. AWVS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-1-Dashboard-%E4%BB%AA%E8%A1%A8%E6%9D%BF"><span class="toc-number">1.7.1.</span> <span class="toc-text">
          1.7.1. Dashboard 仪表板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-2-Targets-%E6%B7%BB%E5%8A%A0%E6%89%AB%E6%8F%8F%E7%9B%AE%E6%A0%87"><span class="toc-number">1.7.2.</span> <span class="toc-text">
          1.7.2. Targets 添加扫描目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-3-Settings"><span class="toc-number">1.7.3.</span> <span class="toc-text">
          1.7.3. Settings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-HP-WebInspect"><span class="toc-number">1.8.</span> <span class="toc-text">
          1.8. HP WebInspect</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-1-%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.8.1.</span> <span class="toc-text">
          1.8.1. 实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-Netspaker"><span class="toc-number">1.9.</span> <span class="toc-text">
          1.9. Netspaker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-10-WVSS"><span class="toc-number">1.10.</span> <span class="toc-text">
          1.10. WVSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-11-%E5%AE%89%E6%81%92%E6%98%8E%E9%89%B4"><span class="toc-number">1.11.</span> <span class="toc-text">
          1.11. 安恒明鉴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-12-Nessus"><span class="toc-number">1.12.</span> <span class="toc-text">
          1.12. Nessus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-12-1-%E5%8A%9F%E8%83%BD"><span class="toc-number">1.12.1.</span> <span class="toc-text">
          1.12.1.功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-12-2-%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.12.2.</span> <span class="toc-text">
          1.12.2. 实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-13-Nexpose"><span class="toc-number">1.13.</span> <span class="toc-text">
          1.13. Nexpose</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-14-%E5%90%AF%E6%98%8E%E5%A4%A9%E9%95%9C%EF%BC%88BS-%E7%89%88%EF%BC%89"><span class="toc-number">1.14.</span> <span class="toc-text">
          1.14. 启明天镜（BS 版）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-15-RSAS%EF%BC%88%E7%BB%BF%E7%9B%9F%EF%BC%89"><span class="toc-number">1.15.</span> <span class="toc-text">
          1.15. RSAS（绿盟）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%EF%BC%8C%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E8%AF%84%E4%BC%B0%E6%96%B9%E6%A1%88%E8%AE%B2%E8%A7%A3"><span class="toc-number">2.</span> <span class="toc-text">
          二，漏洞扫描评估方案讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%B5%8B%E8%AF%95%E7%9B%AE%E7%9A%84"><span class="toc-number">2.1.</span> <span class="toc-text">
          2.1. 测试目的</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E6%B5%8B%E8%AF%95%E7%9B%AE%E7%9A%84"><span class="toc-number">2.1.1.</span> <span class="toc-text">
          2.1.1. 测试目的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-%E6%B5%8B%E8%AF%95%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.1.2.</span> <span class="toc-text">
          2.1.2. 测试对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E6%B5%8B%E8%AF%95%E5%86%85%E5%AE%B9"><span class="toc-number">2.1.3.</span> <span class="toc-text">
          2.1.3. 测试内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83"><span class="toc-number">2.1.4.</span> <span class="toc-text">
          2.1.4. 测试环境</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B"><span class="toc-number">2.2.</span> <span class="toc-text">
          2.2. 测试案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E6%89%AB%E6%8F%8F%E5%8A%9F%E8%83%BD%E5%92%8C%E7%9B%B8%E5%85%B3%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">2.2.1.</span> <span class="toc-text">
          2.2.1. 扫描功能和相关性能测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">2.2.2.</span> <span class="toc-text">
          2.2.2. 管理功能测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%8F%AF%E9%9D%A0%E6%80%A7%E6%B5%8B%E8%AF%95"><span class="toc-number">2.2.3.</span> <span class="toc-text">
          2.2.3. 可靠性测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"><span class="toc-number">2.3.</span> <span class="toc-text">
          2.3. 测试结果</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E6%89%AB%E6%8F%8F%E5%8A%9F%E8%83%BD%E5%92%8C%E7%9B%B8%E5%85%B3%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD"><span class="toc-number">2.3.1.</span> <span class="toc-text">
          2.3.1. 扫描功能和相关测试性能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">2.3.2.</span> <span class="toc-text">
          2.3.2. 管理功能测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-%E5%8F%AF%E9%9D%A0%E6%80%A7%E6%B5%8B%E8%AF%95"><span class="toc-number">2.3.3.</span> <span class="toc-text">
          2.3.3. 可靠性测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E7%9B%B8%E5%85%B3%E6%89%AB%E6%8F%8F%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%AF%84%E4%BC%B0"><span class="toc-number">2.4.</span> <span class="toc-text">
          2.4. 相关扫描软件测试评估</span></a></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/logo.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">Sculptor</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/Sculptor-liu/" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="https://blog.csdn.net/weixin_45798017" target="_blank" rel="noopener" data-popover="social.csdn" data-popover-pos="up"><span class="sidebar-ov-social-item__icon">csdn</span></a></div><div class="sidebar-ov-feed"><span class="sidebar-ov-feed-email"><a class="sidebar-ov-feed-email__link" href="https://mail.qq.com/" target="_blank" rel="noopener"><span class="sidebar-ov-feed-email__icon"><i class="fas fa-envelope"></i></span><span>Email 订阅</span></a></span></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">31</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">3</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">18</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-cn" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Sculptor</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v5.1.1</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.1.1</span></div><div class="busuanzi"><span class="busuanzi-siteuv"><span class="busuanzi-siteuv__icon"><i class="fas fa-user"></i></span><span class="busuanzi-siteuv__info">访问人数</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_uv"></span></span><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">浏览总量</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章（支持多关键词，请用空格分隔）"></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><script>function initSearch() {
  var isXML = true;
  var search_path = 'search.xml';

  if (!search_path) {
    search_path = 'search.xml';
  } else if (/json$/i.test(search_path)) {
    isXML = false;
  }

  var path = '/' + search_path;
  $.ajax({
    url: path,
    dataType: isXML ? 'xml' : 'json',
    async: true,
    success: function (res) {
      var datas = isXML ? $('entry', res).map(function () {
        // 将 XML 转为 JSON
        return {
          title: $('title', this).text(),
          content: $('content', this).text(),
          url: $('url', this).text()
        };
      }).get() : res;
      var $input = $('.search-input input');
      var $result = $('.search-results');
      // 搜索对象（标题、内容）的权重，影响显示顺序
      var WEIGHT = { title: 100, content: 1 };
      var searchPost = function () {
        var searchText = $input.val().toLowerCase().trim();
        // 根据空白字符分隔关键字
        var keywords = searchText.split(/[\s]+/);
        // 搜索结果
        var matchPosts = [];

        // 有多个关键字时，将原文字整个保存下来
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        // 防止未输入字符时搜索
        if (searchText.length > 0) {
          datas.forEach(function (data) {
            var isMatch  = false;
            // 没有标题的文章使用预设的 i18n 变量代替
            var title = (data.title && data.title.trim()) || '[ 文章无标题 ]';
            var titleLower = title && title.toLowerCase();
            // 删除 HTML 标签 和 所有空白字符
            var content = data.content && data.content.replace(/<[^>]+>/g, '');
            var contentLower = content && content.toLowerCase();
            // 删除重复的 /
            var postURL = data.url && decodeURI(data.url).replace(/\/{2,}/g, '/');
            // 标题中匹配到的关键词
            var titleHitSlice = [];
            // 内容中匹配到的关键词
            var contentHitSlice = [];

            keywords.forEach(function (keyword) {
              /**
              * 获取匹配的关键词的索引
              * @param {String} keyword 要匹配的关键字
              * @param {String} text 原文字
              * @param {Boolean} caseSensitive 是否区分大小写
              * @param {Number} weight 匹配对象的权重。权重大的优先显示
              * @return {Array}
              */
              function getIndexByword (word, text, caseSensitive, weight) {
                if (!word || !text) {
                  return [];
                };

                var startIndex = 0; // 每次匹配的开始索引
                var index = -1;     // 匹配到的索引值
                var result = [];    // 匹配结果

                if (!caseSensitive) {
                  word = word.toLowerCase();
                  text = text.toLowerCase();
                }

                while((index = text.indexOf(word, startIndex)) !== -1) {
                  var hasMatch = false;
                  // 索引位置相同的关键词，保留长度较长的
                  titleHitSlice.forEach(function (hit) {
                    if (hit.index === index && hit.word.length < word.length) {
                      hit.word = word;
                      hasMatch = true;
                    }
                  });
                  startIndex = index + word.length;
                  !hasMatch && result.push({ index: index, word: word, weight: weight });
                }
                return result;
              }
              titleHitSlice = titleHitSlice.concat(getIndexByword(keyword, titleLower, false, WEIGHT.title));
              contentHitSlice = contentHitSlice.concat(getIndexByword(keyword, contentLower, false, WEIGHT.content));
            });

            var hitTitle = titleHitSlice.length;
            var hitContent = contentHitSlice.length;

            if (hitTitle > 0 || hitContent > 0) {
              isMatch = true;
            }
            if (isMatch) {
              ;[titleHitSlice, contentHitSlice].forEach(function (hit) {
                // 按照匹配文字的索引的递增顺序排序
                hit.sort(function (left, right) {
                  return left.index - right.index;
                });
              });
              /**
              * 给文本中匹配到的关键词添加标记，从而进行高亮显示
              * @param {String} text 原文本
              * @param {Array} hitSlice 匹配项的索引信息
              * @param {Number} start 开始索引
              * @param {Number} end 结束索引
              * @return {String}
              */
              function highlightKeyword (text, hitSlice, start, end) {
                if (!text || !hitSlice || !hitSlice.length) {
                  return;
                }

                var result = '';
                var startIndex = start;
                var endIndex = end;
                hitSlice.forEach(function (hit) {
                  if (hit.index < startIndex) {
                    return;
                  }

                  var hitWordEnd = hit.index + hit.word.length;
                  result += text.slice(startIndex, hit.index);
                  result += '<b>' + text.slice(hit.index, hitWordEnd) + '</b>';
                  startIndex = hitWordEnd;
                });
                result += text.slice(startIndex, endIndex);
                return result;
              }

              var postData = {};
              // 文章总的搜索权重
              var postWeight = titleHitSlice.length * WEIGHT.title + contentHitSlice.length * WEIGHT.content;
              // 标记匹配关键词后的标题
              var postTitle = highlightKeyword(title, titleHitSlice, 0, title.length) || title;
              // 标记匹配关键词后的内容
              var postContent;
              // 显示内容的长度
              var SHOW_WORD_LENGTH = 200;
              // 命中关键词前的字符显示长度
              var SHOW_WORD_FRONT_LENGTH = 20;
              var SHOW_WORD_END_LENGTH = SHOW_WORD_LENGTH - SHOW_WORD_FRONT_LENGTH;

              // 截取匹配的第一个字符，前后共 200 个字符来显示
              if (contentHitSlice.length > 0) {
                var firstIndex = contentHitSlice[0].index;
                var start = firstIndex > SHOW_WORD_FRONT_LENGTH ? firstIndex - SHOW_WORD_FRONT_LENGTH : 0;
                var end = firstIndex + SHOW_WORD_END_LENGTH;
                postContent = highlightKeyword(content, contentHitSlice, start, end);
              } else { // 未匹配到内容，直接截取前 200 个字符来显示
                postContent = content.slice(0, SHOW_WORD_LENGTH);
              }
              postData.title = postTitle;
              postData.content = postContent;
              postData.url = postURL;
              postData.weight = postWeight;
              matchPosts.push(postData);
            }
          });
        }

        var resultInnerHtml = '';
        if (matchPosts.length) {
          // 按权重递增的顺序排序，使权重大的优先显示
          matchPosts.sort(function (left, right) {
            return right.weight - left.weight;
          });
          resultInnerHtml += '<ul>';
          matchPosts.forEach(function (post) {
            resultInnerHtml += '<li><a class="search-results-title" href="' + post.url + '">';
            resultInnerHtml += post.title;
            resultInnerHtml += '</a><div class="search-results-content">';
            resultInnerHtml += post.content;
            resultInnerHtml += '</div></li>';
          });
          resultInnerHtml += '</ul>';
        } else {
          resultInnerHtml += '<div class="search-results-none"><i class="far fa-meh"></i></div>';
        }
        $result.html(resultInnerHtml);
      };
      $input.on('input', searchPost);
      $input.on('keyup', function (e) {
        if (e.keyCode === Stun.utils.codeToKeyCode('Enter')) {
          searchPost();
        }
      });
    }
  });
}

function closeSearch () {
  $('body').css({ overflow: 'auto' });
  $('.search-popup').css({ display: 'none' });
  $('.search-mask').css({ display: 'none' });
}

window.addEventListener('DOMContentLoaded', function () {
  Stun.utils.pjaxReloadLocalSearch = function () {
    $('.header-nav-search').on('click', function (e) {
      e.stopPropagation();
      $('body').css('overflow', 'hidden');
      $('.search-popup')
        .velocity('stop')
        .velocity('transition.expandIn', {
          duration: 300,
          complete: function () {
            $('.search-popup input').focus();
          }
        });
      $('.search-mask')
        .velocity('stop')
        .velocity('transition.fadeIn', {
          duration: 300
        });

      initSearch();
    });
    $('.search-mask, .search-close').on('click', function () {
      closeSearch();
    });
    $(document).on('keydown', function (e) {
      // Escape <=> 27
      if (e.keyCode === Stun.utils.codeToKeyCode('Escape')) {
        closeSearch();
      }
    });
  };

  Stun.utils.pjaxReloadLocalSearch();
}, false);</script><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-md5@latest/src/md5.min.js"></script><script>function loadGitalk () {
  if (!document.getElementById('gitalk-container')) {
    return;
  }

  var gitalk = new Gitalk({
    id: md5(window.location.pathname.slice(1)),
    clientID: '28f6b94423100cc8a01d',
    clientSecret: '812ec412a6abb31e41feedc3fa3ba97eefa1a882',
    repo: 'Sculptor-liu.github.io',
    owner: 'Sculptor-liu',
    admin: ['Sculptor-liu'],
    distractionFreeMode: 'false',
    language: 'zh-CN'
  });
  gitalk.render('gitalk-container');
}

if (false) {
  loadGitalk();
} else {
  window.addEventListener('DOMContentLoaded', loadGitalk, false);
}</script><script src="/js/utils.js?v=2.1.1"></script><script src="/js/stun-boot.js?v=2.1.1"></script><script src="/js/scroll.js?v=2.1.1"></script><script src="/js/header.js?v=2.1.1"></script><script src="/js/sidebar.js?v=2.1.1"></script><script type="application/json" src="/search.xml"></script></body></html>